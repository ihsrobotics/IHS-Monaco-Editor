import{e as c,m as p}from"./monaco-editor-0-33SIEX.js";import{r as t}from"./vendor-Kn5e7kNx.js";import"./@emotion/react-Kx1cdyI0.js";function D(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function y(){}var U=function(){return U=Object.assign||function(e){for(var u,l=1,n=arguments.length;l<n;l++){u=arguments[l];for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a])}return e},U.apply(this,arguments)};function I(e){var u=e.width,l=e.height,n=e.value,a=e.defaultValue,s=e.language,v=e.theme,m=e.options,S=e.overrideServices,j=e.editorWillMount,R=e.editorDidMount,P=e.editorWillUnmount,L=e.onChange,g=e.className,M=e.original,O=e.originalUri,o=e.modifiedUri,W=t.useRef(null),r=t.useRef(null),V=t.useRef(null),x=t.useRef(null),N=D(u),b=D(l),$=t.useMemo(function(){return{width:N,height:b}},[N,b]),F=function(){var i=j(p);return i||{}},H=function(){R(r.current,p);var i=r.current.getModel().modified;V.current=i.onDidChangeContent(function(d){x.current||L(i.getValue(),d)})},f=function(){P(r.current,p)},T=function(){var i=n??a,d=O==null?void 0:O(p),E=o==null?void 0:o(p),C=d&&c.getModel(d),w=E&&c.getModel(E);C?(C.setValue(M),c.setModelLanguage(C,s)):C=c.createModel(i,s,d),w?(C.setValue(i),c.setModelLanguage(w,s)):w=c.createModel(i,s,E),r.current.setModel({original:C,modified:w})};return t.useEffect(function(){W.current&&(F(),r.current=c.createDiffEditor(W.current,U(U(U({},g?{extraEditorClassName:g}:{}),m),v?{theme:v}:{}),S),T(),H())},[]),t.useEffect(function(){r.current&&r.current.updateOptions(U(U({},g?{extraEditorClassName:g}:{}),m))},[g,m]),t.useEffect(function(){r.current&&r.current.layout()},[u,l]),t.useEffect(function(){if(r.current){var i=r.current.getModel(),d=i.original,E=i.modified;c.setModelLanguage(d,s),c.setModelLanguage(E,s)}},[s]),t.useEffect(function(){if(r.current){var i=r.current.getModel().modified;x.current=!0,r.current.getModifiedEditor().pushUndoStop(),i.pushEditOperations([],[{range:i.getFullModelRange(),text:n}]),r.current.getModifiedEditor().pushUndoStop(),x.current=!1}},[n]),t.useEffect(function(){c.setTheme(v)},[v]),t.useEffect(function(){if(r.current){var i=r.current.getModel().original;M!==i.getValue()&&i.setValue(M)}},[M]),t.useEffect(function(){return function(){if(r.current){f(),r.current.dispose();var i=r.current.getModel(),d=i.original,E=i.modified;d&&d.dispose(),E&&E.dispose()}V.current&&V.current.dispose()}},[]),t.createElement("div",{ref:W,style:$,className:"react-monaco-editor-container"})}I.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:y,editorDidMount:y,editorWillUnmount:y,onChange:y,className:null};I.displayName="MonacoDiffEditor";var h=function(){return h=Object.assign||function(e){for(var u,l=1,n=arguments.length;l<n;l++){u=arguments[l];for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a])}return e},h.apply(this,arguments)},q=function(e,u){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&u.indexOf(n)<0&&(l[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)u.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(l[n[a]]=e[n[a]]);return l};function k(e){var u=e.width,l=e.height,n=e.value,a=e.defaultValue,s=e.language,v=e.theme,m=e.options,S=e.overrideServices,j=e.editorWillMount,R=e.editorDidMount,P=e.editorWillUnmount,L=e.onChange,g=e.className,M=e.uri,O=t.useRef(null),o=t.useRef(null),W=t.useRef(null),r=t.useRef(null),V=D(u),x=D(l),N=t.useMemo(function(){return{width:V,height:x}},[V,x]),b=function(){var f=j(p);return f||{}},$=function(){R(o.current,p),W.current=o.current.onDidChangeModelContent(function(f){r.current||L(o.current.getValue(),f)})},F=function(){P(o.current,p)},H=function(){var f=n!==null?n:a;if(O.current){var T=h(h({},m),b()),i=M==null?void 0:M(p),d=i&&c.getModel(i);d?(d.setValue(f),c.setModelLanguage(d,s)):d=c.createModel(f,s,i),o.current=c.create(O.current,h(h(h({model:d},g?{extraEditorClassName:g}:{}),T),v?{theme:v}:{}),S),$()}};return t.useEffect(H,[]),t.useEffect(function(){if(o.current){if(n===o.current.getValue())return;var f=o.current.getModel();r.current=!0,o.current.pushUndoStop(),f.pushEditOperations([],[{range:f.getFullModelRange(),text:n}],void 0),o.current.pushUndoStop(),r.current=!1}},[n]),t.useEffect(function(){if(o.current){var f=o.current.getModel();c.setModelLanguage(f,s)}},[s]),t.useEffect(function(){if(o.current){m.model;var f=q(m,["model"]);o.current.updateOptions(h(h({},g?{extraEditorClassName:g}:{}),f))}},[g,m]),t.useEffect(function(){o.current&&o.current.layout()},[u,l]),t.useEffect(function(){c.setTheme(v)},[v]),t.useEffect(function(){return function(){o.current&&(F(),o.current.dispose()),W.current&&W.current.dispose()}},[]),t.createElement("div",{ref:O,style:N,className:"react-monaco-editor-container"})}k.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:y,editorDidMount:y,editorWillUnmount:y,onChange:y,className:null};k.displayName="MonacoEditor";export{I as MonacoDiffEditor,k as default,p as monaco};
