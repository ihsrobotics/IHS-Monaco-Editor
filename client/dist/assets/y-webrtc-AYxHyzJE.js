import{p as ue,B as yt}from"./monaco-editor-TtZ-fpRa.js";import{i as zt,c as je,f as at,a as $t,m as Gt,n as Kt,g as Pe,b as bt,O as mt,d as Jt,l as Xt,s as Fe,w as ee,e as pe,r as _t,h as De,j as ct,k as wt,o as Qt,p as Xe,t as ie,q as Zt,u as vt,v as Qe,x as ne,A as en,y as tn,z as nn,B as qe,C as ut,D as Et,E as rn,F as sn}from"./y-monaco-NBPYL57F.js";import{c as he,g as on}from"./vendor-1pvYTyrb.js";import{e as an,b as cn,d as un}from"./yjs--V61jkkQ.js";const ln=crypto.getRandomValues.bind(crypto),hn=Math.random,fn=()=>ln(new Uint32Array(1))[0],dn="10000000-1000-4000-8000"+-1e11,pn=()=>dn.replace(/[018]/g,h=>(h^fn()&15>>h/4).toString(16)),hr=h=>new Promise(h);Promise.all.bind(Promise);const gn=h=>Promise.reject(h),Ze=h=>Promise.resolve(h),lt=h=>h===void 0?null:h;class yn{constructor(){this.map=new Map}setItem(m,T){this.map.set(m,T)}getItem(m){return this.map.get(m)}}let Ct=new yn,et=!0;try{typeof localStorage<"u"&&localStorage&&(Ct=localStorage,et=!1)}catch{}const Rt=Ct,bn=h=>et||addEventListener("storage",h),mn=h=>et||removeEventListener("storage",h);var St={};const Le=typeof ue<"u"&&ue.release&&/node|io\.js/.test(ue.release.name)&&Object.prototype.toString.call(typeof ue<"u"?ue:0)==="[object process]",Tt=typeof window<"u"&&typeof document<"u"&&!Le;let fe;const _n=()=>{if(fe===void 0)if(Le){fe=je();const h=ue.argv;let m=null;for(let T=0;T<h.length;T++){const U=h[T];U[0]==="-"?(m!==null&&fe.set(m,""),m=U):m!==null&&(fe.set(m,U),m=null)}m!==null&&fe.set(m,"")}else typeof location=="object"?(fe=je(),(location.search||"?").slice(1).split("&").forEach(h=>{if(h.length!==0){const[m,T]=h.split("=");fe.set(`--${at(m,"-")}`,T),fe.set(`-${at(m,"-")}`,T)}})):fe=je();return fe},Ge=h=>_n().has(h),We=h=>lt(Le?St[h.toUpperCase()]:Rt.getItem(h)),wn=h=>Ge("--"+h)||We(h)!==null;wn("production");const ht=Le&&zt(St.FORCE_COLOR,["true","1","2"]),vn=!Ge("no-colors")&&(!Le||ue.stdout.isTTY||ht)&&(!Le||Ge("color")||ht||We("COLORTERM")!==null||(We("TERM")||"").includes("color")),At=h=>new Uint8Array(h),En=(h,m,T)=>new Uint8Array(h,m,T),Cn=h=>new Uint8Array(h),Rn=h=>{let m="";for(let T=0;T<h.byteLength;T++)m+=$t(h[T]);return btoa(m)},Sn=h=>yt.from(h.buffer,h.byteOffset,h.byteLength).toString("base64"),Tn=h=>{const m=atob(h),T=At(m.length);for(let U=0;U<m.length;U++)T[U]=m.charCodeAt(U);return T},An=h=>{const m=yt.from(h,"base64");return En(m.buffer,m.byteOffset,m.byteLength)},kt=Tt?Rn:Sn,Ot=Tt?Tn:An,fr=h=>{const m=At(h.byteLength);return m.set(h),m};class kn{constructor(m,T){this.left=m,this.right=T}}const de=(h,m)=>new kn(h,m);typeof DOMParser<"u"&&new DOMParser;const On=h=>Gt(h,(m,T)=>`${T}:${m};`).join(""),ge=Symbol,le=ge(),xe=ge(),Lt=ge(),tt=ge(),xt=ge(),Ln=ge(),Nt=ge(),It=ge(),Ye=ge(),xn=h=>{const m=[];let T=0;for(;T<h.length;T++){const U=h[T];U.constructor===String||U.constructor===Number||U.constructor===Object&&m.push(JSON.stringify(U))}return m},ft=[xt,Nt,It,Lt];let ze=0,dt=Pe();const Nn=(h,m)=>{const T=ft[ze],U=We("log"),D=U!==null&&(U==="*"||U==="true"||new RegExp(U,"gi").test(m));return ze=(ze+1)%ft.length,m+=": ",D?(...R)=>{const L=Pe(),y=L-dt;dt=L,h(T,m,Ye,...R.map(o=>typeof o=="string"||typeof o=="symbol"?o:JSON.stringify(o)),T," +"+y+"ms")}:Kt},In={[le]:de("font-weight","bold"),[xe]:de("font-weight","normal"),[Lt]:de("color","blue"),[xt]:de("color","green"),[tt]:de("color","grey"),[Ln]:de("color","red"),[Nt]:de("color","purple"),[It]:de("color","orange"),[Ye]:de("color","black")},Mn=h=>{const m=[],T=[],U=je();let D=[],R=0;for(;R<h.length;R++){const L=h[R],y=In[L];if(y!==void 0)U.set(y.left,y.right);else if(L.constructor===String||L.constructor===Number){const o=On(U);R>0||o.length>0?(m.push("%c"+L),T.push(o)):m.push(L)}else break}for(R>0&&(D=T,D.unshift(m.join("")));R<h.length;R++){const L=h[R];L instanceof Symbol||D.push(L)}return D},Pn=vn?Mn:xn,Dn=(...h)=>{console.log(...Pn(h)),Bn.forEach(m=>m.print(h))},Bn=bt(),Un=h=>Nn(Dn,h),jn=1200,Fn=2500,He=3e4,Ke=h=>{if(h.shouldConnect&&h.ws===null){const m=new WebSocket(h.url),T=h.binaryType;let U=null;T&&(m.binaryType=T),h.ws=m,h.connecting=!0,h.connected=!1,m.onmessage=L=>{h.lastMessageReceived=Pe();const y=L.data,o=typeof y=="string"?JSON.parse(y):y;o&&o.type==="pong"&&(clearTimeout(U),U=setTimeout(R,He/2)),h.emit("message",[o,h])};const D=L=>{h.ws!==null&&(h.ws=null,h.connecting=!1,h.connected?(h.connected=!1,h.emit("disconnect",[{type:"disconnect",error:L},h])):h.unsuccessfulReconnects++,setTimeout(Ke,Jt(Xt(h.unsuccessfulReconnects+1)*jn,Fn),h)),clearTimeout(U)},R=()=>{h.ws===m&&h.send({type:"ping"})};m.onclose=()=>D(null),m.onerror=L=>D(L),m.onopen=()=>{h.lastMessageReceived=Pe(),h.connecting=!1,h.connected=!0,h.unsuccessfulReconnects=0,h.emit("connect",[{type:"connect"},h]),U=setTimeout(R,He/2)}}};class qn extends mt{constructor(m,{binaryType:T}={}){super(),this.url=m,this.ws=null,this.binaryType=T||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&He<Pe()-this.lastMessageReceived&&this.ws.close()},He/2),Ke(this)}send(m){this.ws&&this.ws.send(JSON.stringify(m))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Ke(this)}}const Mt=new Map;class Wn{constructor(m){this.room=m,this.onmessage=null,this._onChange=T=>T.key===m&&this.onmessage!==null&&this.onmessage({data:Ot(T.newValue||"")}),bn(this._onChange)}postMessage(m){Rt.setItem(this.room,kt(Cn(m)))}close(){mn(this._onChange)}}const Hn=typeof BroadcastChannel>"u"?Wn:BroadcastChannel,nt=h=>Fe(Mt,h,()=>{const m=bt(),T=new Hn(h);return T.onmessage=U=>m.forEach(D=>D(U.data,"broadcastchannel")),{bc:T,subs:m}}),Vn=(h,m)=>(nt(h).subs.add(m),m),Yn=(h,m)=>{const T=nt(h),U=T.subs.delete(m);return U&&T.subs.size===0&&(T.bc.close(),Mt.delete(h)),U},zn=(h,m,T=null)=>{const U=nt(h);U.bc.postMessage(m),U.subs.forEach(D=>D(m,T))};function Ue(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pt={exports:{}};(function(h,m){(function(T){h.exports=T()})(function(){var T=Math.floor,U=Math.abs,D=Math.pow;return function(){function R(L,y,o){function S(u,p){if(!y[u]){if(!L[u]){var a=typeof Ue=="function"&&Ue;if(!p&&a)return a(u,!0);if(x)return x(u,!0);var b=new Error("Cannot find module '"+u+"'");throw b.code="MODULE_NOT_FOUND",b}var N=y[u]={exports:{}};L[u][0].call(N.exports,function(A){var I=L[u][1][A];return S(I||A)},N,N.exports,R,L,y,o)}return y[u].exports}for(var x=typeof Ue=="function"&&Ue,r=0;r<o.length;r++)S(o[r]);return S}return R}()({1:[function(R,L,y){function o(c){var l=c.length;if(0<l%4)throw new Error("Invalid string. Length must be a multiple of 4");var w=c.indexOf("=");w===-1&&(w=l);var d=w===l?0:4-w%4;return[w,d]}function S(c,l,w){return 3*(l+w)/4-w}function x(c){var l,w,d=o(c),C=d[0],M=d[1],g=new N(S(c,C,M)),v=0,P=0<M?C-4:C;for(w=0;w<P;w+=4)l=b[c.charCodeAt(w)]<<18|b[c.charCodeAt(w+1)]<<12|b[c.charCodeAt(w+2)]<<6|b[c.charCodeAt(w+3)],g[v++]=255&l>>16,g[v++]=255&l>>8,g[v++]=255&l;return M===2&&(l=b[c.charCodeAt(w)]<<2|b[c.charCodeAt(w+1)]>>4,g[v++]=255&l),M===1&&(l=b[c.charCodeAt(w)]<<10|b[c.charCodeAt(w+1)]<<4|b[c.charCodeAt(w+2)]>>2,g[v++]=255&l>>8,g[v++]=255&l),g}function r(c){return a[63&c>>18]+a[63&c>>12]+a[63&c>>6]+a[63&c]}function u(c,l,w){for(var d,C=[],M=l;M<w;M+=3)d=(16711680&c[M]<<16)+(65280&c[M+1]<<8)+(255&c[M+2]),C.push(r(d));return C.join("")}function p(c){for(var l,w=c.length,d=w%3,C=[],M=16383,g=0,v=w-d;g<v;g+=M)C.push(u(c,g,g+M>v?v:g+M));return d===1?(l=c[w-1],C.push(a[l>>2]+a[63&l<<4]+"==")):d===2&&(l=(c[w-2]<<8)+c[w-1],C.push(a[l>>10]+a[63&l>>4]+a[63&l<<2]+"=")),C.join("")}y.byteLength=function(c){var l=o(c),w=l[0],d=l[1];return 3*(w+d)/4-d},y.toByteArray=x,y.fromByteArray=p;for(var a=[],b=[],N=typeof Uint8Array>"u"?Array:Uint8Array,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=0,i=A.length;I<i;++I)a[I]=A[I],b[A.charCodeAt(I)]=I;b[45]=62,b[95]=63},{}],2:[function(){},{}],3:[function(R,L,y){(function(){(function(){var o=String.fromCharCode,S=Math.min;function x(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(e)}return u(e,t,n)}function u(e,t,n){if(typeof e=="string")return N(e,t);if(ArrayBuffer.isView(e))return A(e);if(e==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(E(e,ArrayBuffer)||e&&E(e.buffer,ArrayBuffer))return I(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var f=e.valueOf&&e.valueOf();if(f!=null&&f!==e)return r.from(f,t,n);var _=i(e);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return r.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function p(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e,t,n){return p(e),0>=e||t===void 0?x(e):typeof n=="string"?x(e).fill(t,n):x(e).fill(t)}function b(e){return p(e),x(0>e?0:0|c(e))}function N(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!r.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|l(e,t),f=x(n),_=f.write(e,t);return _!==n&&(f=f.slice(0,_)),f}function A(e){for(var t=0>e.length?0:0|c(e.length),n=x(t),f=0;f<t;f+=1)n[f]=255&e[f];return n}function I(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var f;return f=t===void 0&&n===void 0?new Uint8Array(e):n===void 0?new Uint8Array(e,t):new Uint8Array(e,t,n),f.__proto__=r.prototype,f}function i(e){if(r.isBuffer(e)){var t=0|c(e.length),n=x(t);return n.length===0||e.copy(n,0,0,t),n}return e.length===void 0?e.type==="Buffer"&&Array.isArray(e.data)?A(e.data):void 0:typeof e.length!="number"||k(e.length)?x(0):A(e)}function c(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function l(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||E(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,f=2<arguments.length&&arguments[2]===!0;if(!f&&n===0)return 0;for(var _=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Ee(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return ae(e).length;default:if(_)return f?-1:Ee(e).length;t=(""+t).toLowerCase(),_=!0}}function w(e,t,n){var f=!1;if((t===void 0||0>t)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),0>=n)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return se(this,t,n);case"utf8":case"utf-8":return Q(this,t,n);case"ascii":return W(this,t,n);case"latin1":case"binary":return Se(this,t,n);case"base64":return G(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,t,n);default:if(f)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),f=!0}}function d(e,t,n){var f=e[t];e[t]=e[n],e[n]=f}function C(e,t,n,f,_){if(e.length===0)return-1;if(typeof n=="string"?(f=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,k(n)&&(n=_?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(_)return-1;n=e.length-1}else if(0>n)if(_)n=0;else return-1;if(typeof t=="string"&&(t=r.from(t,f)),r.isBuffer(t))return t.length===0?-1:M(e,t,n,f,_);if(typeof t=="number")return t&=255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,f,_);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,f,_){function O(Te,Me){return F===1?Te[Me]:Te.readUInt16BE(Me*F)}var F=1,z=e.length,J=t.length;if(f!==void 0&&(f=(f+"").toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(2>e.length||2>t.length)return-1;F=2,z/=2,J/=2,n/=2}var $;if(_){var Y=-1;for($=n;$<z;$++)if(O(e,$)!==O(t,Y===-1?0:$-Y))Y!==-1&&($-=$-Y),Y=-1;else if(Y===-1&&(Y=$),$-Y+1===J)return Y*F}else for(n+J>z&&(n=z-J),$=n;0<=$;$--){for(var Z=!0,Ce=0;Ce<J;Ce++)if(O(e,$+Ce)!==O(t,Ce)){Z=!1;break}if(Z)return $}return-1}function g(e,t,n,f){n=+n||0;var _=e.length-n;f?(f=+f,f>_&&(f=_)):f=_;var O=t.length;f>O/2&&(f=O/2);for(var F,z=0;z<f;++z){if(F=parseInt(t.substr(2*z,2),16),k(F))return z;e[n+z]=F}return z}function v(e,t,n,f){return ce(Ee(t,e.length-n),e,n,f)}function P(e,t,n,f){return ce(Ie(t),e,n,f)}function j(e,t,n,f){return P(e,t,n,f)}function H(e,t,n,f){return ce(ae(t),e,n,f)}function V(e,t,n,f){return ce(_e(t,e.length-n),e,n,f)}function G(e,t,n){return t===0&&n===e.length?B.fromByteArray(e):B.fromByteArray(e.slice(t,n))}function Q(e,t,n){n=S(e.length,n);for(var f=[],_=t;_<n;){var O=e[_],F=null,z=239<O?4:223<O?3:191<O?2:1;if(_+z<=n){var J,$,Y,Z;z===1?128>O&&(F=O):z===2?(J=e[_+1],(192&J)==128&&(Z=(31&O)<<6|63&J,127<Z&&(F=Z))):z===3?(J=e[_+1],$=e[_+2],(192&J)==128&&(192&$)==128&&(Z=(15&O)<<12|(63&J)<<6|63&$,2047<Z&&(55296>Z||57343<Z)&&(F=Z))):z===4&&(J=e[_+1],$=e[_+2],Y=e[_+3],(192&J)==128&&(192&$)==128&&(192&Y)==128&&(Z=(15&O)<<18|(63&J)<<12|(63&$)<<6|63&Y,65535<Z&&1114112>Z&&(F=Z)))}F===null?(F=65533,z=1):65535<F&&(F-=65536,f.push(55296|1023&F>>>10),F=56320|1023&F),f.push(F),_+=z}return te(f)}function te(e){var t=e.length;if(t<=4096)return o.apply(String,e);for(var n="",f=0;f<t;)n+=o.apply(String,e.slice(f,f+=4096));return n}function W(e,t,n){var f="";n=S(e.length,n);for(var _=t;_<n;++_)f+=o(127&e[_]);return f}function Se(e,t,n){var f="";n=S(e.length,n);for(var _=t;_<n;++_)f+=o(e[_]);return f}function se(e,t,n){var f=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>f)&&(n=f);for(var _="",O=t;O<n;++O)_+=ve(e[O]);return _}function ye(e,t,n){for(var f=e.slice(t,n),_="",O=0;O<f.length;O+=2)_+=o(f[O]+256*f[O+1]);return _}function X(e,t,n){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function K(e,t,n,f,_,O){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>_||t<O)throw new RangeError('"value" argument is out of bounds');if(n+f>e.length)throw new RangeError("Index out of range")}function oe(e,t,n,f){if(n+f>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function be(e,t,n,f,_){return t=+t,n>>>=0,_||oe(e,t,n,4),q.write(e,t,n,f,23,4),n+4}function me(e,t,n,f,_){return t=+t,n>>>=0,_||oe(e,t,n,8),q.write(e,t,n,f,52,8),n+8}function Ne(e){if(e=e.split("=")[0],e=e.trim().replace(s,""),2>e.length)return"";for(;e.length%4!=0;)e+="=";return e}function ve(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Ee(e,t){t=t||1/0;for(var n,f=e.length,_=null,O=[],F=0;F<f;++F){if(n=e.charCodeAt(F),55295<n&&57344>n){if(!_){if(56319<n){-1<(t-=3)&&O.push(239,191,189);continue}else if(F+1===f){-1<(t-=3)&&O.push(239,191,189);continue}_=n;continue}if(56320>n){-1<(t-=3)&&O.push(239,191,189),_=n;continue}n=(_-55296<<10|n-56320)+65536}else _&&-1<(t-=3)&&O.push(239,191,189);if(_=null,128>n){if(0>(t-=1))break;O.push(n)}else if(2048>n){if(0>(t-=2))break;O.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;O.push(224|n>>12,128|63&n>>6,128|63&n)}else if(1114112>n){if(0>(t-=4))break;O.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error("Invalid code point")}return O}function Ie(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function _e(e,t){for(var n,f,_,O=[],F=0;F<e.length&&!(0>(t-=2));++F)n=e.charCodeAt(F),f=n>>8,_=n%256,O.push(_),O.push(f);return O}function ae(e){return B.toByteArray(Ne(e))}function ce(e,t,n,f){for(var _=0;_<f&&!(_+n>=t.length||_>=e.length);++_)t[_+n]=e[_];return _}function E(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function k(e){return e!==e}var B=R("base64-js"),q=R("ieee754");y.Buffer=r,y.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},y.INSPECT_MAX_BYTES=50,y.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},e.foo()===42}catch{return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){return r.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){return r.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,n){return u(e,t,n)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,t,n){return a(e,t,n)},r.allocUnsafe=function(e){return b(e)},r.allocUnsafeSlow=function(e){return b(e)},r.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==r.prototype},r.compare=function(e,t){if(E(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),E(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,f=t.length,_=0,O=S(n,f);_<O;++_)if(e[_]!==t[_]){n=e[_],f=t[_];break}return n<f?-1:f<n?1:0},r.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return r.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var f=r.allocUnsafe(t),_=0;for(n=0;n<e.length;++n){var O=e[n];if(E(O,Uint8Array)&&(O=r.from(O)),!r.isBuffer(O))throw new TypeError('"list" argument must be an Array of Buffers');O.copy(f,_),_+=O.length}return f},r.byteLength=l,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Q(this,0,e):w.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||r.compare(this,e)===0},r.prototype.inspect=function(){var e="",t=y.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,n,f,_){if(E(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),f===void 0&&(f=0),_===void 0&&(_=this.length),0>t||n>e.length||0>f||_>this.length)throw new RangeError("out of range index");if(f>=_&&t>=n)return 0;if(f>=_)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,f>>>=0,_>>>=0,this===e)return 0;for(var O=_-f,F=n-t,z=S(O,F),J=this.slice(f,_),$=e.slice(t,n),Y=0;Y<z;++Y)if(J[Y]!==$[Y]){O=J[Y],F=$[Y];break}return O<F?-1:F<O?1:0},r.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},r.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},r.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},r.prototype.write=function(e,t,n,f){if(t===void 0)f="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")f=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,f===void 0&&(f="utf8")):(f=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _=this.length-t;if((n===void 0||n>_)&&(n=_),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");for(var O=!1;;)switch(f){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return P(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return H(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,e,t,n);default:if(O)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),O=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var f=this.subarray(e,t);return f.__proto__=r.prototype,f},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var f=this[e],_=1,O=0;++O<t&&(_*=256);)f+=this[e+O]*_;return f},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var f=this[e+--t],_=1;0<t&&(_*=256);)f+=this[e+--t]*_;return f},r.prototype.readUInt8=function(e,t){return e>>>=0,t||X(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||X(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||X(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||X(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||X(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var f=this[e],_=1,O=0;++O<t&&(_*=256);)f+=this[e+O]*_;return _*=128,f>=_&&(f-=D(2,8*t)),f},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||X(e,t,this.length);for(var f=t,_=1,O=this[e+--f];0<f&&(_*=256);)O+=this[e+--f]*_;return _*=128,O>=_&&(O-=D(2,8*t)),O},r.prototype.readInt8=function(e,t){return e>>>=0,t||X(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||X(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){e>>>=0,t||X(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||X(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||X(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||X(e,4,this.length),q.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||X(e,4,this.length),q.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||X(e,8,this.length),q.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||X(e,8,this.length),q.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,f){if(e=+e,t>>>=0,n>>>=0,!f){var _=D(2,8*n)-1;K(this,e,t,n,_,0)}var O=1,F=0;for(this[t]=255&e;++F<n&&(O*=256);)this[t+F]=255&e/O;return t+n},r.prototype.writeUIntBE=function(e,t,n,f){if(e=+e,t>>>=0,n>>>=0,!f){var _=D(2,8*n)-1;K(this,e,t,n,_,0)}var O=n-1,F=1;for(this[t+O]=255&e;0<=--O&&(F*=256);)this[t+O]=255&e/F;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,n,f){if(e=+e,t>>>=0,!f){var _=D(2,8*n-1);K(this,e,t,n,_-1,-_)}var O=0,F=1,z=0;for(this[t]=255&e;++O<n&&(F*=256);)0>e&&z===0&&this[t+O-1]!==0&&(z=1),this[t+O]=255&(e/F>>0)-z;return t+n},r.prototype.writeIntBE=function(e,t,n,f){if(e=+e,t>>>=0,!f){var _=D(2,8*n-1);K(this,e,t,n,_-1,-_)}var O=n-1,F=1,z=0;for(this[t+O]=255&e;0<=--O&&(F*=256);)0>e&&z===0&&this[t+O+1]!==0&&(z=1),this[t+O]=255&(e/F>>0)-z;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||K(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,n){return be(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return be(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return me(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return me(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,f){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),f||f===0||(f=this.length),t>=e.length&&(t=e.length),t||(t=0),0<f&&f<n&&(f=n),f===n||e.length===0||this.length===0)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>f)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),e.length-t<f-n&&(f=e.length-t+n);var _=f-n;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(t,n,f);else if(this===e&&n<t&&t<f)for(var O=_-1;0<=O;--O)e[O+t]=this[O+n];else Uint8Array.prototype.set.call(e,this.subarray(n,f),t);return _},r.prototype.fill=function(e,t,n,f){if(typeof e=="string"){if(typeof t=="string"?(f=t,t=0,n=this.length):typeof n=="string"&&(f=n,n=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!r.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(e.length===1){var _=e.charCodeAt(0);(f==="utf8"&&128>_||f==="latin1")&&(e=_)}}else typeof e=="number"&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var O;if(typeof e=="number")for(O=t;O<n;++O)this[O]=e;else{var F=r.isBuffer(e)?e:r.from(e,f),z=F.length;if(z===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(O=0;O<n-t;++O)this[O+t]=F[O%z]}return this};var s=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,R("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(R,L,y){(function(o){(function(){function S(){let r;try{r=y.storage.getItem("debug")}catch{}return!r&&typeof o<"u"&&"env"in o&&(r=o.env.DEBUG),r}y.formatArgs=function(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+L.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;r.splice(1,0,u,"color: inherit");let p=0,a=0;r[0].replace(/%[a-zA-Z%]/g,b=>{b==="%%"||(p++,b==="%c"&&(a=p))}),r.splice(a,0,u)},y.save=function(r){try{r?y.storage.setItem("debug",r):y.storage.removeItem("debug")}catch{}},y.load=S,y.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},y.storage=function(){try{return localStorage}catch{}}(),y.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],y.log=console.debug||console.log||(()=>{}),L.exports=R("./common")(y);const{formatters:x}=L.exports;x.j=function(r){try{return JSON.stringify(r)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}).call(this)}).call(this,R("_process"))},{"./common":5,_process:12}],5:[function(R,L){L.exports=function(y){function o(r){function u(...b){if(!u.enabled)return;const N=u,A=+new Date,I=A-(p||A);N.diff=I,N.prev=p,N.curr=A,p=A,b[0]=o.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let i=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(l,w)=>{if(l==="%%")return"%";i++;const d=o.formatters[w];if(typeof d=="function"){const C=b[i];l=d.call(N,C),b.splice(i,1),i--}return l}),o.formatArgs.call(N,b),(N.log||o.log).apply(N,b)}let p,a=null;return u.namespace=r,u.useColors=o.useColors(),u.color=o.selectColor(r),u.extend=S,u.destroy=o.destroy,Object.defineProperty(u,"enabled",{enumerable:!0,configurable:!1,get:()=>a===null?o.enabled(r):a,set:b=>{a=b}}),typeof o.init=="function"&&o.init(u),u}function S(r,u){const p=o(this.namespace+(typeof u>"u"?":":u)+r);return p.log=this.log,p}function x(r){return r.toString().substring(2,r.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(r){return r instanceof Error?r.stack||r.message:r},o.disable=function(){const r=[...o.names.map(x),...o.skips.map(x).map(u=>"-"+u)].join(",");return o.enable(""),r},o.enable=function(r){o.save(r),o.names=[],o.skips=[];let u;const p=(typeof r=="string"?r:"").split(/[\s,]+/),a=p.length;for(u=0;u<a;u++)p[u]&&(r=p[u].replace(/\*/g,".*?"),r[0]==="-"?o.skips.push(new RegExp("^"+r.substr(1)+"$")):o.names.push(new RegExp("^"+r+"$")))},o.enabled=function(r){if(r[r.length-1]==="*")return!0;let u,p;for(u=0,p=o.skips.length;u<p;u++)if(o.skips[u].test(r))return!1;for(u=0,p=o.names.length;u<p;u++)if(o.names[u].test(r))return!0;return!1},o.humanize=R("ms"),o.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(y).forEach(r=>{o[r]=y[r]}),o.names=[],o.skips=[],o.formatters={},o.selectColor=function(r){let u=0;for(let p=0;p<r.length;p++)u=(u<<5)-u+r.charCodeAt(p),u|=0;return o.colors[U(u)%o.colors.length]},o.enable(o.load()),o}},{ms:11}],6:[function(R,L){function y(o,S){for(const x in S)Object.defineProperty(o,x,{value:S[x],enumerable:!0,configurable:!0});return o}L.exports=function(o,S,x){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");x||(x={}),typeof S=="object"&&(x=S,S=""),S&&(x.code=S);try{return y(o,x)}catch{x.message=o.message,x.stack=o.stack;const u=function(){};return u.prototype=Object.create(Object.getPrototypeOf(o)),y(new u,x)}}},{}],7:[function(R,L){function y(g){console&&console.warn&&console.warn(g)}function o(){o.init.call(this)}function S(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function x(g){return g._maxListeners===void 0?o.defaultMaxListeners:g._maxListeners}function r(g,v,P,j){var H,V,G;if(S(P),V=g._events,V===void 0?(V=g._events=Object.create(null),g._eventsCount=0):(V.newListener!==void 0&&(g.emit("newListener",v,P.listener?P.listener:P),V=g._events),G=V[v]),G===void 0)G=V[v]=P,++g._eventsCount;else if(typeof G=="function"?G=V[v]=j?[P,G]:[G,P]:j?G.unshift(P):G.push(P),H=x(g),0<H&&G.length>H&&!G.warned){G.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+(v+" listeners added. Use emitter.setMaxListeners() to increase limit"));Q.name="MaxListenersExceededWarning",Q.emitter=g,Q.type=v,Q.count=G.length,y(Q)}return g}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(g,v,P){var j={fired:!1,wrapFn:void 0,target:g,type:v,listener:P},H=u.bind(j);return H.listener=P,j.wrapFn=H,H}function a(g,v,P){var j=g._events;if(j===void 0)return[];var H=j[v];return H===void 0?[]:typeof H=="function"?P?[H.listener||H]:[H]:P?I(H):N(H,H.length)}function b(g){var v=this._events;if(v!==void 0){var P=v[g];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}function N(g,v){for(var P=Array(v),j=0;j<v;++j)P[j]=g[j];return P}function A(g,v){for(;v+1<g.length;v++)g[v]=g[v+1];g.pop()}function I(g){for(var v=Array(g.length),P=0;P<v.length;++P)v[P]=g[P].listener||g[P];return v}function i(g,v,P){typeof g.on=="function"&&c(g,"error",v,P)}function c(g,v,P,j){if(typeof g.on=="function")j.once?g.once(v,P):g.on(v,P);else if(typeof g.addEventListener=="function")g.addEventListener(v,function H(V){j.once&&g.removeEventListener(v,H),P(V)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g)}var l,w=typeof Reflect=="object"?Reflect:null,d=w&&typeof w.apply=="function"?w.apply:function(g,v,P){return Function.prototype.apply.call(g,v,P)};l=w&&typeof w.ownKeys=="function"?w.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var C=Number.isNaN||function(g){return g!==g};L.exports=o,L.exports.once=function(g,v){return new Promise(function(P,j){function H(G){g.removeListener(v,V),j(G)}function V(){typeof g.removeListener=="function"&&g.removeListener("error",H),P([].slice.call(arguments))}c(g,v,V,{once:!0}),v!=="error"&&i(g,H,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var M=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return M},set:function(g){if(typeof g!="number"||0>g||C(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");M=g}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(g){if(typeof g!="number"||0>g||C(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},o.prototype.getMaxListeners=function(){return x(this)},o.prototype.emit=function(g){for(var v=[],P=1;P<arguments.length;P++)v.push(arguments[P]);var j=g==="error",H=this._events;if(H!==void 0)j=j&&H.error===void 0;else if(!j)return!1;if(j){var V;if(0<v.length&&(V=v[0]),V instanceof Error)throw V;var G=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw G.context=V,G}var Q=H[g];if(Q===void 0)return!1;if(typeof Q=="function")d(Q,this,v);else for(var te=Q.length,W=N(Q,te),P=0;P<te;++P)d(W[P],this,v);return!0},o.prototype.addListener=function(g,v){return r(this,g,v,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(g,v){return r(this,g,v,!0)},o.prototype.once=function(g,v){return S(v),this.on(g,p(this,g,v)),this},o.prototype.prependOnceListener=function(g,v){return S(v),this.prependListener(g,p(this,g,v)),this},o.prototype.removeListener=function(g,v){var P,j,H,V,G;if(S(v),j=this._events,j===void 0)return this;if(P=j[g],P===void 0)return this;if(P===v||P.listener===v)--this._eventsCount==0?this._events=Object.create(null):(delete j[g],j.removeListener&&this.emit("removeListener",g,P.listener||v));else if(typeof P!="function"){for(H=-1,V=P.length-1;0<=V;V--)if(P[V]===v||P[V].listener===v){G=P[V].listener,H=V;break}if(0>H)return this;H===0?P.shift():A(P,H),P.length===1&&(j[g]=P[0]),j.removeListener!==void 0&&this.emit("removeListener",g,G||v)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(g){var v,P,j;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[g]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete P[g]),this;if(arguments.length===0){var H,V=Object.keys(P);for(j=0;j<V.length;++j)H=V[j],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(v=P[g],typeof v=="function")this.removeListener(g,v);else if(v!==void 0)for(j=v.length-1;0<=j;j--)this.removeListener(g,v[j]);return this},o.prototype.listeners=function(g){return a(this,g,!0)},o.prototype.rawListeners=function(g){return a(this,g,!1)},o.listenerCount=function(g,v){return typeof g.listenerCount=="function"?g.listenerCount(v):b.call(g,v)},o.prototype.listenerCount=b,o.prototype.eventNames=function(){return 0<this._eventsCount?l(this._events):[]}},{}],8:[function(R,L){L.exports=function(){if(typeof globalThis>"u")return null;var y={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return y.RTCPeerConnection?y:null}},{}],9:[function(R,L,y){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */y.read=function(o,S,x,r,u){var p,a,b=8*u-r-1,N=(1<<b)-1,A=N>>1,I=-7,i=x?u-1:0,c=x?-1:1,l=o[S+i];for(i+=c,p=l&(1<<-I)-1,l>>=-I,I+=b;0<I;p=256*p+o[S+i],i+=c,I-=8);for(a=p&(1<<-I)-1,p>>=-I,I+=r;0<I;a=256*a+o[S+i],i+=c,I-=8);if(p===0)p=1-A;else{if(p===N)return a?NaN:(l?-1:1)*(1/0);a+=D(2,r),p-=A}return(l?-1:1)*a*D(2,p-r)},y.write=function(o,S,x,r,u,p){var a,b,N,A=Math.LN2,I=Math.log,i=8*p-u-1,c=(1<<i)-1,l=c>>1,w=u===23?D(2,-24)-D(2,-77):0,d=r?0:p-1,C=r?1:-1,M=0>S||S===0&&0>1/S?1:0;for(S=U(S),isNaN(S)||S===1/0?(b=isNaN(S)?1:0,a=c):(a=T(I(S)/A),1>S*(N=D(2,-a))&&(a--,N*=2),S+=1<=a+l?w/N:w*D(2,1-l),2<=S*N&&(a++,N/=2),a+l>=c?(b=0,a=c):1<=a+l?(b=(S*N-1)*D(2,u),a+=l):(b=S*D(2,l-1)*D(2,u),a=0));8<=u;o[x+d]=255&b,d+=C,b/=256,u-=8);for(a=a<<u|b,i+=u;0<i;o[x+d]=255&a,d+=C,a/=256,i-=8);o[x+d-C]|=128*M}},{}],10:[function(R,L){L.exports=typeof Object.create=="function"?function(y,o){o&&(y.super_=o,y.prototype=Object.create(o.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}))}:function(y,o){if(o){y.super_=o;var S=function(){};S.prototype=o.prototype,y.prototype=new S,y.prototype.constructor=y}}},{}],11:[function(R,L){var y=Math.round;function o(u){if(u+="",!(100<u.length)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(p){var a=parseFloat(p[1]),b=(p[2]||"ms").toLowerCase();return b==="years"||b==="year"||b==="yrs"||b==="yr"||b==="y"?315576e5*a:b==="weeks"||b==="week"||b==="w"?6048e5*a:b==="days"||b==="day"||b==="d"?864e5*a:b==="hours"||b==="hour"||b==="hrs"||b==="hr"||b==="h"?36e5*a:b==="minutes"||b==="minute"||b==="mins"||b==="min"||b==="m"?6e4*a:b==="seconds"||b==="second"||b==="secs"||b==="sec"||b==="s"?1e3*a:b==="milliseconds"||b==="millisecond"||b==="msecs"||b==="msec"||b==="ms"?a:void 0}}}function S(u){var p=U(u);return 864e5<=p?y(u/864e5)+"d":36e5<=p?y(u/36e5)+"h":6e4<=p?y(u/6e4)+"m":1e3<=p?y(u/1e3)+"s":u+"ms"}function x(u){var p=U(u);return 864e5<=p?r(u,p,864e5,"day"):36e5<=p?r(u,p,36e5,"hour"):6e4<=p?r(u,p,6e4,"minute"):1e3<=p?r(u,p,1e3,"second"):u+" ms"}function r(u,p,a,b){return y(u/a)+" "+b+(p>=1.5*a?"s":"")}L.exports=function(u,p){p=p||{};var a=typeof u;if(a=="string"&&0<u.length)return o(u);if(a==="number"&&isFinite(u))return p.long?x(u):S(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}},{}],12:[function(R,L){function y(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function S(w){if(b===setTimeout)return setTimeout(w,0);if((b===y||!b)&&setTimeout)return b=setTimeout,setTimeout(w,0);try{return b(w,0)}catch{try{return b.call(null,w,0)}catch{return b.call(this,w,0)}}}function x(w){if(N===clearTimeout)return clearTimeout(w);if((N===o||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(w);try{return N(w)}catch{try{return N.call(null,w)}catch{return N.call(this,w)}}}function r(){c&&I&&(c=!1,I.length?i=I.concat(i):l=-1,i.length&&u())}function u(){if(!c){var w=S(r);c=!0;for(var d=i.length;d;){for(I=i,i=[];++l<d;)I&&I[l].run();l=-1,d=i.length}I=null,c=!1,x(w)}}function p(w,d){this.fun=w,this.array=d}function a(){}var b,N,A=L.exports={};(function(){try{b=typeof setTimeout=="function"?setTimeout:y}catch{b=y}try{N=typeof clearTimeout=="function"?clearTimeout:o}catch{N=o}})();var I,i=[],c=!1,l=-1;A.nextTick=function(w){var d=Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)d[C-1]=arguments[C];i.push(new p(w,d)),i.length!==1||c||S(u)},p.prototype.run=function(){this.fun.apply(null,this.array)},A.title="browser",A.browser=!0,A.env={},A.argv=[],A.version="",A.versions={},A.on=a,A.addListener=a,A.once=a,A.off=a,A.removeListener=a,A.removeAllListeners=a,A.emit=a,A.prependListener=a,A.prependOnceListener=a,A.listeners=function(){return[]},A.binding=function(){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(){throw new Error("process.chdir is not supported")},A.umask=function(){return 0}},{}],13:[function(R,L){(function(y){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let o;L.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?y:window):S=>(o||(o=Promise.resolve())).then(S).catch(x=>setTimeout(()=>{throw x},0))}).call(this)}).call(this,typeof he>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:he)},{}],14:[function(R,L){(function(y,o){(function(){var S=R("safe-buffer").Buffer,x=o.crypto||o.msCrypto;L.exports=x&&x.getRandomValues?function(r,u){if(r>4294967295)throw new RangeError("requested too many random bytes");var p=S.allocUnsafe(r);if(0<r)if(65536<r)for(var a=0;a<r;a+=65536)x.getRandomValues(p.slice(a,a+65536));else x.getRandomValues(p);return typeof u=="function"?y.nextTick(function(){u(null,p)}):p}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,R("_process"),typeof he>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:he)},{_process:12,"safe-buffer":30}],15:[function(R,L){function y(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function o(a,b,N){function A(i,c,l){return typeof b=="string"?b:b(i,c,l)}N||(N=Error);var I=function(i){function c(l,w,d){return i.call(this,A(l,w,d))||this}return y(c,i),c}(N);I.prototype.name=N.name,I.prototype.code=a,p[a]=I}function S(a,b){if(Array.isArray(a)){var N=a.length;return a=a.map(function(A){return A+""}),2<N?"one of ".concat(b," ").concat(a.slice(0,N-1).join(", "),", or ")+a[N-1]:N===2?"one of ".concat(b," ").concat(a[0]," or ").concat(a[1]):"of ".concat(b," ").concat(a[0])}return"of ".concat(b," ").concat(a+"")}function x(a,b,N){return a.substr(!N||0>N?0:+N,b.length)===b}function r(a,b,N){return(N===void 0||N>a.length)&&(N=a.length),a.substring(N-b.length,N)===b}function u(a,b,N){return typeof N!="number"&&(N=0),!(N+b.length>a.length)&&a.indexOf(b,N)!==-1}var p={};o("ERR_INVALID_OPT_VALUE",function(a,b){return'The value "'+b+'" is invalid for option "'+a+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(a,b,N){var A;typeof b=="string"&&x(b,"not ")?(A="must not be",b=b.replace(/^not /,"")):A="must be";var I;if(r(a," argument"))I="The ".concat(a," ").concat(A," ").concat(S(b,"type"));else{var i=u(a,".")?"property":"argument";I='The "'.concat(a,'" ').concat(i," ").concat(A," ").concat(S(b,"type"))}return I+=". Received type ".concat(typeof N),I},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),L.exports.codes=p},{}],16:[function(R,L){(function(y){(function(){function o(A){return this instanceof o?(u.call(this,A),p.call(this,A),this.allowHalfOpen=!0,void(A&&(A.readable===!1&&(this.readable=!1),A.writable===!1&&(this.writable=!1),A.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",S))))):new o(A)}function S(){this._writableState.ended||y.nextTick(x,this)}function x(A){A.end()}var r=Object.keys||function(A){var I=[];for(var i in A)I.push(i);return I};L.exports=o;var u=R("./_stream_readable"),p=R("./_stream_writable");R("inherits")(o,u);for(var a,b=r(p.prototype),N=0;N<b.length;N++)a=b[N],o.prototype[a]||(o.prototype[a]=p.prototype[a]);Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(A){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=A,this._writableState.destroyed=A)}})}).call(this)}).call(this,R("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(R,L){function y(S){return this instanceof y?void o.call(this,S):new y(S)}L.exports=y;var o=R("./_stream_transform");R("inherits")(y,o),y.prototype._transform=function(S,x,r){r(null,S)}},{"./_stream_transform":19,inherits:10}],18:[function(R,L){(function(y,o){(function(){function S(s){return ye.from(s)}function x(s){return ye.isBuffer(s)||s instanceof X}function r(s,e,t){return typeof s.prependListener=="function"?s.prependListener(e,t):void(s._events&&s._events[e]?Array.isArray(s._events[e])?s._events[e].unshift(t):s._events[e]=[t,s._events[e]]:s.on(e,t))}function u(s,e,t){te=te||R("./_stream_duplex"),s=s||{},typeof t!="boolean"&&(t=e instanceof te),this.objectMode=!!s.objectMode,t&&(this.objectMode=this.objectMode||!!s.readableObjectMode),this.highWaterMark=Ie(this,s,"readableHighWaterMark",t),this.buffer=new Ne,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=s.emitClose!==!1,this.autoDestroy=!!s.autoDestroy,this.destroyed=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(!oe&&(oe=R("string_decoder/").StringDecoder),this.decoder=new oe(s.encoding),this.encoding=s.encoding)}function p(s){if(te=te||R("./_stream_duplex"),!(this instanceof p))return new p(s);var e=this instanceof te;this._readableState=new u(s,this,e),this.readable=!0,s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy)),se.call(this)}function a(s,e,t,n,f){W("readableAddChunk",e);var _=s._readableState;if(e===null)_.reading=!1,i(s,_);else{var O;if(f||(O=N(_,e)),O)B(s,O);else if(!(_.objectMode||e&&0<e.length))n||(_.reading=!1,w(s,_));else if(typeof e=="string"||_.objectMode||Object.getPrototypeOf(e)===ye.prototype||(e=S(e)),n)_.endEmitted?B(s,new k):b(s,_,e,!0);else if(_.ended)B(s,new ce);else{if(_.destroyed)return!1;_.reading=!1,_.decoder&&!t?(e=_.decoder.write(e),_.objectMode||e.length!==0?b(s,_,e,!1):w(s,_)):b(s,_,e,!1)}}return!_.ended&&(_.length<_.highWaterMark||_.length===0)}function b(s,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,s.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&c(s)),w(s,e)}function N(s,e){var t;return x(e)||typeof e=="string"||e===void 0||s.objectMode||(t=new ae("chunk",["string","Buffer","Uint8Array"],e)),t}function A(s){return 1073741824<=s?s=1073741824:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function I(s,e){return 0>=s||e.length===0&&e.ended?0:e.objectMode?1:s===s?(s>e.highWaterMark&&(e.highWaterMark=A(s)),s<=e.length?s:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function i(s,e){if(W("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?c(s):(e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,l(s)))}}function c(s){var e=s._readableState;W("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(W("emitReadable",e.flowing),e.emittedReadable=!0,y.nextTick(l,s))}function l(s){var e=s._readableState;W("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(s.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,j(s)}function w(s,e){e.readingMore||(e.readingMore=!0,y.nextTick(d,s,e))}function d(s,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(W("maybeReadMore read 0"),s.read(0),t===e.length)break}e.readingMore=!1}function C(s){return function(){var e=s._readableState;W("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&Se(s,"data")&&(e.flowing=!0,j(s))}}function M(s){var e=s._readableState;e.readableListening=0<s.listenerCount("readable"),e.resumeScheduled&&!e.paused?e.flowing=!0:0<s.listenerCount("data")&&s.resume()}function g(s){W("readable nexttick read 0"),s.read(0)}function v(s,e){e.resumeScheduled||(e.resumeScheduled=!0,y.nextTick(P,s,e))}function P(s,e){W("resume",e.reading),e.reading||s.read(0),e.resumeScheduled=!1,s.emit("resume"),j(s),e.flowing&&!e.reading&&s.read(0)}function j(s){var e=s._readableState;for(W("flow",e.flowing);e.flowing&&s.read()!==null;);}function H(s,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!s||s>=e.length?(t=e.decoder?e.buffer.join(""):e.buffer.length===1?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(s,e.decoder),t}function V(s){var e=s._readableState;W("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,y.nextTick(G,e,s))}function G(s,e){if(W("endReadableNT",s.endEmitted,s.length),!s.endEmitted&&s.length===0&&(s.endEmitted=!0,e.readable=!1,e.emit("end"),s.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}function Q(s,e){for(var t=0,n=s.length;t<n;t++)if(s[t]===e)return t;return-1}L.exports=p;var te;p.ReadableState=u;var W;R("events").EventEmitter;var Se=function(s,e){return s.listeners(e).length},se=R("./internal/streams/stream"),ye=R("buffer").Buffer,X=o.Uint8Array||function(){},K=R("util");W=K&&K.debuglog?K.debuglog("stream"):function(){};var oe,be,me,Ne=R("./internal/streams/buffer_list"),ve=R("./internal/streams/destroy"),Ee=R("./internal/streams/state"),Ie=Ee.getHighWaterMark,_e=R("../errors").codes,ae=_e.ERR_INVALID_ARG_TYPE,ce=_e.ERR_STREAM_PUSH_AFTER_EOF,E=_e.ERR_METHOD_NOT_IMPLEMENTED,k=_e.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;R("inherits")(p,se);var B=ve.errorOrDestroy,q=["error","close","destroy","pause","resume"];Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(s){this._readableState&&(this._readableState.destroyed=s)}}),p.prototype.destroy=ve.destroy,p.prototype._undestroy=ve.undestroy,p.prototype._destroy=function(s,e){e(s)},p.prototype.push=function(s,e){var t,n=this._readableState;return n.objectMode?t=!0:typeof s=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(s=ye.from(s,e),e=""),t=!0),a(this,s,e,!1,t)},p.prototype.unshift=function(s){return a(this,s,null,!0,!1)},p.prototype.isPaused=function(){return this._readableState.flowing===!1},p.prototype.setEncoding=function(s){oe||(oe=R("string_decoder/").StringDecoder);var e=new oe(s);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this},p.prototype.read=function(s){W("read",s),s=parseInt(s,10);var e=this._readableState,t=s;if(s!==0&&(e.emittedReadable=!1),s===0&&e.needReadable&&((e.highWaterMark===0?0<e.length:e.length>=e.highWaterMark)||e.ended))return W("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?V(this):c(this),null;if(s=I(s,e),s===0&&e.ended)return e.length===0&&V(this),null;var n=e.needReadable;W("need readable",n),(e.length===0||e.length-s<e.highWaterMark)&&(n=!0,W("length less than watermark",n)),e.ended||e.reading?(n=!1,W("reading or ended",n)):n&&(W("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(s=I(t,e)));var f;return f=0<s?H(s,e):null,f===null?(e.needReadable=e.length<=e.highWaterMark,s=0):(e.length-=s,e.awaitDrain=0),e.length===0&&(!e.ended&&(e.needReadable=!0),t!==s&&e.ended&&V(this)),f!==null&&this.emit("data",f),f},p.prototype._read=function(){B(this,new E("_read()"))},p.prototype.pipe=function(s,e){function t(Ae,ke){W("onunpipe"),Ae===$&&ke&&ke.hasUnpiped===!1&&(ke.hasUnpiped=!0,f())}function n(){W("onend"),s.end()}function f(){W("cleanup"),s.removeListener("close",F),s.removeListener("finish",z),s.removeListener("drain",Te),s.removeListener("error",O),s.removeListener("unpipe",t),$.removeListener("end",n),$.removeListener("end",J),$.removeListener("data",_),Me=!0,Y.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&Te()}function _(Ae){W("ondata");var ke=s.write(Ae);W("dest.write",ke),ke===!1&&((Y.pipesCount===1&&Y.pipes===s||1<Y.pipesCount&&Q(Y.pipes,s)!==-1)&&!Me&&(W("false write response, pause",Y.awaitDrain),Y.awaitDrain++),$.pause())}function O(Ae){W("onerror",Ae),J(),s.removeListener("error",O),Se(s,"error")===0&&B(s,Ae)}function F(){s.removeListener("finish",z),J()}function z(){W("onfinish"),s.removeListener("close",F),J()}function J(){W("unpipe"),$.unpipe(s)}var $=this,Y=this._readableState;switch(Y.pipesCount){case 0:Y.pipes=s;break;case 1:Y.pipes=[Y.pipes,s];break;default:Y.pipes.push(s)}Y.pipesCount+=1,W("pipe count=%d opts=%j",Y.pipesCount,e);var Z=(!e||e.end!==!1)&&s!==y.stdout&&s!==y.stderr,Ce=Z?n:J;Y.endEmitted?y.nextTick(Ce):$.once("end",Ce),s.on("unpipe",t);var Te=C($);s.on("drain",Te);var Me=!1;return $.on("data",_),r(s,"error",O),s.once("close",F),s.once("finish",z),s.emit("pipe",$),Y.flowing||(W("pipe resume"),$.resume()),s},p.prototype.unpipe=function(s){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return s&&s!==e.pipes?this:(s||(s=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,s&&s.emit("unpipe",this,t),this);if(!s){var n=e.pipes,f=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var _=0;_<f;_++)n[_].emit("unpipe",this,{hasUnpiped:!1});return this}var O=Q(e.pipes,s);return O===-1?this:(e.pipes.splice(O,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),s.emit("unpipe",this,t),this)},p.prototype.on=function(s,e){var t=se.prototype.on.call(this,s,e),n=this._readableState;return s==="data"?(n.readableListening=0<this.listenerCount("readable"),n.flowing!==!1&&this.resume()):s=="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,W("on readable",n.length,n.reading),n.length?c(this):!n.reading&&y.nextTick(g,this)),t},p.prototype.addListener=p.prototype.on,p.prototype.removeListener=function(s,e){var t=se.prototype.removeListener.call(this,s,e);return s==="readable"&&y.nextTick(M,this),t},p.prototype.removeAllListeners=function(s){var e=se.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&y.nextTick(M,this),e},p.prototype.resume=function(){var s=this._readableState;return s.flowing||(W("resume"),s.flowing=!s.readableListening,v(this,s)),s.paused=!1,this},p.prototype.pause=function(){return W("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(W("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},p.prototype.wrap=function(s){var e=this,t=this._readableState,n=!1;for(var f in s.on("end",function(){if(W("wrapped end"),t.decoder&&!t.ended){var O=t.decoder.end();O&&O.length&&e.push(O)}e.push(null)}),s.on("data",function(O){if(W("wrapped data"),t.decoder&&(O=t.decoder.write(O)),!(t.objectMode&&O==null)&&(t.objectMode||O&&O.length)){var F=e.push(O);F||(n=!0,s.pause())}}),s)this[f]===void 0&&typeof s[f]=="function"&&(this[f]=function(O){return function(){return s[O].apply(s,arguments)}}(f));for(var _=0;_<q.length;_++)s.on(q[_],this.emit.bind(this,q[_]));return this._read=function(O){W("wrapped _read",O),n&&(n=!1,s.resume())},this},typeof Symbol=="function"&&(p.prototype[Symbol.asyncIterator]=function(){return be===void 0&&(be=R("./internal/streams/async_iterator")),be(this)}),Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(p.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(p.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(s){this._readableState&&(this._readableState.flowing=s)}}),p._fromList=H,Object.defineProperty(p.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(p.from=function(s,e){return me===void 0&&(me=R("./internal/streams/from")),me(p,s,e)})}).call(this)}).call(this,R("_process"),typeof he>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:he)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(R,L){function y(A,I){var i=this._transformState;i.transforming=!1;var c=i.writecb;if(c===null)return this.emit("error",new p);i.writechunk=null,i.writecb=null,I!=null&&this.push(I),c(A);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function o(A){return this instanceof o?(N.call(this,A),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,A&&(typeof A.transform=="function"&&(this._transform=A.transform),typeof A.flush=="function"&&(this._flush=A.flush)),void this.on("prefinish",S)):new o(A)}function S(){var A=this;typeof this._flush!="function"||this._readableState.destroyed?x(this,null,null):this._flush(function(I,i){x(A,I,i)})}function x(A,I,i){if(I)return A.emit("error",I);if(i!=null&&A.push(i),A._writableState.length)throw new b;if(A._transformState.transforming)throw new a;return A.push(null)}L.exports=o;var r=R("../errors").codes,u=r.ERR_METHOD_NOT_IMPLEMENTED,p=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=r.ERR_TRANSFORM_WITH_LENGTH_0,N=R("./_stream_duplex");R("inherits")(o,N),o.prototype.push=function(A,I){return this._transformState.needTransform=!1,N.prototype.push.call(this,A,I)},o.prototype._transform=function(A,I,i){i(new u("_transform()"))},o.prototype._write=function(A,I,i){var c=this._transformState;if(c.writecb=i,c.writechunk=A,c.writeencoding=I,!c.transforming){var l=this._readableState;(c.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},o.prototype._read=function(){var A=this._transformState;A.writechunk===null||A.transforming?A.needTransform=!0:(A.transforming=!0,this._transform(A.writechunk,A.writeencoding,A.afterTransform))},o.prototype._destroy=function(A,I){N.prototype._destroy.call(this,A,function(i){I(i)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(R,L){(function(y,o){(function(){function S(E){var k=this;this.next=null,this.entry=null,this.finish=function(){V(k,E)}}function x(E){return W.from(E)}function r(E){return W.isBuffer(E)||E instanceof Se}function u(){}function p(E,k,B){G=G||R("./_stream_duplex"),E=E||{},typeof B!="boolean"&&(B=k instanceof G),this.objectMode=!!E.objectMode,B&&(this.objectMode=this.objectMode||!!E.writableObjectMode),this.highWaterMark=X(this,E,"writableHighWaterMark",B),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=E.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=E.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){w(k,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function a(E){G=G||R("./_stream_duplex");var k=this instanceof G;return k||ce.call(a,this)?(this._writableState=new p(E,this,k),this.writable=!0,E&&(typeof E.write=="function"&&(this._write=E.write),typeof E.writev=="function"&&(this._writev=E.writev),typeof E.destroy=="function"&&(this._destroy=E.destroy),typeof E.final=="function"&&(this._final=E.final)),void te.call(this)):new a(E)}function b(E,k){var B=new Ie;ae(E,B),y.nextTick(k,B)}function N(E,k,B,q){var s;return B===null?s=new Ee:typeof B!="string"&&!k.objectMode&&(s=new oe("chunk",["string","Buffer"],B)),!s||(ae(E,s),y.nextTick(q,s),!1)}function A(E,k,B){return E.objectMode||E.decodeStrings===!1||typeof k!="string"||(k=W.from(k,B)),k}function I(E,k,B,q,s,e){if(!B){var t=A(k,q,s);q!==t&&(B=!0,s="buffer",q=t)}var n=k.objectMode?1:q.length;k.length+=n;var f=k.length<k.highWaterMark;if(f||(k.needDrain=!0),k.writing||k.corked){var _=k.lastBufferedRequest;k.lastBufferedRequest={chunk:q,encoding:s,isBuf:B,callback:e,next:null},_?_.next=k.lastBufferedRequest:k.bufferedRequest=k.lastBufferedRequest,k.bufferedRequestCount+=1}else i(E,k,!1,n,q,s,e);return f}function i(E,k,B,q,s,e,t){k.writelen=q,k.writecb=t,k.writing=!0,k.sync=!0,k.destroyed?k.onwrite(new ve("write")):B?E._writev(s,k.onwrite):E._write(s,e,k.onwrite),k.sync=!1}function c(E,k,B,q,s){--k.pendingcb,B?(y.nextTick(s,q),y.nextTick(j,E,k),E._writableState.errorEmitted=!0,ae(E,q)):(s(q),E._writableState.errorEmitted=!0,ae(E,q),j(E,k))}function l(E){E.writing=!1,E.writecb=null,E.length-=E.writelen,E.writelen=0}function w(E,k){var B=E._writableState,q=B.sync,s=B.writecb;if(typeof s!="function")throw new me;if(l(B),k)c(E,B,q,k,s);else{var e=g(B)||E.destroyed;e||B.corked||B.bufferProcessing||!B.bufferedRequest||M(E,B),q?y.nextTick(d,E,B,e,s):d(E,B,e,s)}}function d(E,k,B,q){B||C(E,k),k.pendingcb--,q(),j(E,k)}function C(E,k){k.length===0&&k.needDrain&&(k.needDrain=!1,E.emit("drain"))}function M(E,k){k.bufferProcessing=!0;var B=k.bufferedRequest;if(E._writev&&B&&B.next){var q=k.bufferedRequestCount,s=Array(q),e=k.corkedRequestsFree;e.entry=B;for(var t=0,n=!0;B;)s[t]=B,B.isBuf||(n=!1),B=B.next,t+=1;s.allBuffers=n,i(E,k,!0,k.length,s,"",e.finish),k.pendingcb++,k.lastBufferedRequest=null,e.next?(k.corkedRequestsFree=e.next,e.next=null):k.corkedRequestsFree=new S(k),k.bufferedRequestCount=0}else{for(;B;){var f=B.chunk,_=B.encoding,O=B.callback,F=k.objectMode?1:f.length;if(i(E,k,!1,F,f,_,O),B=B.next,k.bufferedRequestCount--,k.writing)break}B===null&&(k.lastBufferedRequest=null)}k.bufferedRequest=B,k.bufferProcessing=!1}function g(E){return E.ending&&E.length===0&&E.bufferedRequest===null&&!E.finished&&!E.writing}function v(E,k){E._final(function(B){k.pendingcb--,B&&ae(E,B),k.prefinished=!0,E.emit("prefinish"),j(E,k)})}function P(E,k){k.prefinished||k.finalCalled||(typeof E._final!="function"||k.destroyed?(k.prefinished=!0,E.emit("prefinish")):(k.pendingcb++,k.finalCalled=!0,y.nextTick(v,E,k)))}function j(E,k){var B=g(k);if(B&&(P(E,k),k.pendingcb===0&&(k.finished=!0,E.emit("finish"),k.autoDestroy))){var q=E._readableState;(!q||q.autoDestroy&&q.endEmitted)&&E.destroy()}return B}function H(E,k,B){k.ending=!0,j(E,k),B&&(k.finished?y.nextTick(B):E.once("finish",B)),k.ended=!0,E.writable=!1}function V(E,k,B){var q=E.entry;for(E.entry=null;q;){var s=q.callback;k.pendingcb--,s(B),q=q.next}k.corkedRequestsFree.next=E}L.exports=a;var G;a.WritableState=p;var Q={deprecate:R("util-deprecate")},te=R("./internal/streams/stream"),W=R("buffer").Buffer,Se=o.Uint8Array||function(){},se=R("./internal/streams/destroy"),ye=R("./internal/streams/state"),X=ye.getHighWaterMark,K=R("../errors").codes,oe=K.ERR_INVALID_ARG_TYPE,be=K.ERR_METHOD_NOT_IMPLEMENTED,me=K.ERR_MULTIPLE_CALLBACK,Ne=K.ERR_STREAM_CANNOT_PIPE,ve=K.ERR_STREAM_DESTROYED,Ee=K.ERR_STREAM_NULL_VALUES,Ie=K.ERR_STREAM_WRITE_AFTER_END,_e=K.ERR_UNKNOWN_ENCODING,ae=se.errorOrDestroy;R("inherits")(a,te),p.prototype.getBuffer=function(){for(var E=this.bufferedRequest,k=[];E;)k.push(E),E=E.next;return k},function(){try{Object.defineProperty(p.prototype,"buffer",{get:Q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ce;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ce=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(E){return!!ce.call(this,E)||this===a&&E&&E._writableState instanceof p}})):ce=function(E){return E instanceof this},a.prototype.pipe=function(){ae(this,new Ne)},a.prototype.write=function(E,k,B){var q=this._writableState,s=!1,e=!q.objectMode&&r(E);return e&&!W.isBuffer(E)&&(E=x(E)),typeof k=="function"&&(B=k,k=null),e?k="buffer":!k&&(k=q.defaultEncoding),typeof B!="function"&&(B=u),q.ending?b(this,B):(e||N(this,q,E,B))&&(q.pendingcb++,s=I(this,q,e,E,k,B)),s},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var E=this._writableState;E.corked&&(E.corked--,!E.writing&&!E.corked&&!E.bufferProcessing&&E.bufferedRequest&&M(this,E))},a.prototype.setDefaultEncoding=function(E){if(typeof E=="string"&&(E=E.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((E+"").toLowerCase())))throw new _e(E);return this._writableState.defaultEncoding=E,this},Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),a.prototype._write=function(E,k,B){B(new be("_write()"))},a.prototype._writev=null,a.prototype.end=function(E,k,B){var q=this._writableState;return typeof E=="function"?(B=E,E=null,k=null):typeof k=="function"&&(B=k,k=null),E!=null&&this.write(E,k),q.corked&&(q.corked=1,this.uncork()),q.ending||H(this,q,B),this},Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(E){this._writableState&&(this._writableState.destroyed=E)}}),a.prototype.destroy=se.destroy,a.prototype._undestroy=se.undestroy,a.prototype._destroy=function(E,k){k(E)}}).call(this)}).call(this,R("_process"),typeof he>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:he)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(R,L){(function(y){(function(){function o(C,M,g){return M in C?Object.defineProperty(C,M,{value:g,enumerable:!0,configurable:!0,writable:!0}):C[M]=g,C}function S(C,M){return{value:C,done:M}}function x(C){var M=C[b];if(M!==null){var g=C[l].read();g!==null&&(C[i]=null,C[b]=null,C[N]=null,M(S(g,!1)))}}function r(C){y.nextTick(x,C)}function u(C,M){return function(g,v){C.then(function(){return M[I]?void g(S(void 0,!0)):void M[c](g,v)},v)}}var p,a=R("./end-of-stream"),b=Symbol("lastResolve"),N=Symbol("lastReject"),A=Symbol("error"),I=Symbol("ended"),i=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream"),w=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((p={get stream(){return this[l]},next:function(){var C=this,M=this[A];if(M!==null)return Promise.reject(M);if(this[I])return Promise.resolve(S(void 0,!0));if(this[l].destroyed)return new Promise(function(j,H){y.nextTick(function(){C[A]?H(C[A]):j(S(void 0,!0))})});var g,v=this[i];if(v)g=new Promise(u(v,this));else{var P=this[l].read();if(P!==null)return Promise.resolve(S(P,!1));g=new Promise(this[c])}return this[i]=g,g}},o(p,Symbol.asyncIterator,function(){return this}),o(p,"return",function(){var C=this;return new Promise(function(M,g){C[l].destroy(null,function(v){return v?void g(v):void M(S(void 0,!0))})})}),p),w);L.exports=function(C){var M,g=Object.create(d,(M={},o(M,l,{value:C,writable:!0}),o(M,b,{value:null,writable:!0}),o(M,N,{value:null,writable:!0}),o(M,A,{value:null,writable:!0}),o(M,I,{value:C._readableState.endEmitted,writable:!0}),o(M,c,{value:function(v,P){var j=g[l].read();j?(g[i]=null,g[b]=null,g[N]=null,v(S(j,!1))):(g[b]=v,g[N]=P)},writable:!0}),M));return g[i]=null,a(C,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var P=g[N];return P!==null&&(g[i]=null,g[b]=null,g[N]=null,P(v)),void(g[A]=v)}var j=g[b];j!==null&&(g[i]=null,g[b]=null,g[N]=null,j(S(void 0,!0))),g[I]=!0}),C.on("readable",r.bind(null,g)),g}}).call(this)}).call(this,R("_process"))},{"./end-of-stream":24,_process:12}],22:[function(R,L){function y(i,c){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(i);c&&(w=w.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),l.push.apply(l,w)}return l}function o(i){for(var c,l=1;l<arguments.length;l++)c=arguments[l]==null?{}:arguments[l],l%2?y(Object(c),!0).forEach(function(w){S(i,w,c[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):y(Object(c)).forEach(function(w){Object.defineProperty(i,w,Object.getOwnPropertyDescriptor(c,w))});return i}function S(i,c,l){return c in i?Object.defineProperty(i,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[c]=l,i}function x(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")}function r(i,c){for(var l,w=0;w<c.length;w++)l=c[w],l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}function u(i,c,l){return c&&r(i.prototype,c),l&&r(i,l),i}function p(i,c,l){b.prototype.copy.call(i,c,l)}var a=R("buffer"),b=a.Buffer,N=R("util"),A=N.inspect,I=A&&A.custom||"inspect";L.exports=function(){function i(){x(this,i),this.head=null,this.tail=null,this.length=0}return u(i,[{key:"push",value:function(c){var l={data:c,next:null};0<this.length?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(c){var l={data:c,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(this.length!==0){var c=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,c}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(c){if(this.length===0)return"";for(var l=this.head,w=""+l.data;l=l.next;)w+=c+l.data;return w}},{key:"concat",value:function(c){if(this.length===0)return b.alloc(0);for(var l=b.allocUnsafe(c>>>0),w=this.head,d=0;w;)p(w.data,l,d),d+=w.data.length,w=w.next;return l}},{key:"consume",value:function(c,l){var w;return c<this.head.data.length?(w=this.head.data.slice(0,c),this.head.data=this.head.data.slice(c)):c===this.head.data.length?w=this.shift():w=l?this._getString(c):this._getBuffer(c),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(c){var l=this.head,w=1,d=l.data;for(c-=d.length;l=l.next;){var C=l.data,M=c>C.length?C.length:c;if(d+=M===C.length?C:C.slice(0,c),c-=M,c===0){M===C.length?(++w,this.head=l.next?l.next:this.tail=null):(this.head=l,l.data=C.slice(M));break}++w}return this.length-=w,d}},{key:"_getBuffer",value:function(c){var l=b.allocUnsafe(c),w=this.head,d=1;for(w.data.copy(l),c-=w.data.length;w=w.next;){var C=w.data,M=c>C.length?C.length:c;if(C.copy(l,l.length-c,0,M),c-=M,c===0){M===C.length?(++d,this.head=w.next?w.next:this.tail=null):(this.head=w,w.data=C.slice(M));break}++d}return this.length-=d,l}},{key:I,value:function(c,l){return A(this,o({},l,{depth:0,customInspect:!1}))}}]),i}()},{buffer:3,util:2}],23:[function(R,L){(function(y){(function(){function o(r,u){x(r,u),S(r)}function S(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function x(r,u){r.emit("error",u)}L.exports={destroy:function(r,u){var p=this,a=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return a||b?(u?u(r):r&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,y.nextTick(x,this,r)):y.nextTick(x,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(N){!u&&N?p._writableState?p._writableState.errorEmitted?y.nextTick(S,p):(p._writableState.errorEmitted=!0,y.nextTick(o,p,N)):y.nextTick(o,p,N):u?(y.nextTick(S,p),u(N)):y.nextTick(S,p)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,u){var p=r._readableState,a=r._writableState;p&&p.autoDestroy||a&&a.autoDestroy?r.destroy(u):r.emit("error",u)}}}).call(this)}).call(this,R("_process"))},{_process:12}],24:[function(R,L){function y(u){var p=!1;return function(){if(!p){p=!0;for(var a=arguments.length,b=Array(a),N=0;N<a;N++)b[N]=arguments[N];u.apply(this,b)}}}function o(){}function S(u){return u.setHeader&&typeof u.abort=="function"}function x(u,p,a){if(typeof p=="function")return x(u,null,p);p||(p={}),a=y(a||o);var b=p.readable||p.readable!==!1&&u.readable,N=p.writable||p.writable!==!1&&u.writable,A=function(){u.writable||i()},I=u._writableState&&u._writableState.finished,i=function(){N=!1,I=!0,b||a.call(u)},c=u._readableState&&u._readableState.endEmitted,l=function(){b=!1,c=!0,N||a.call(u)},w=function(M){a.call(u,M)},d=function(){var M;return b&&!c?(u._readableState&&u._readableState.ended||(M=new r),a.call(u,M)):N&&!I?(u._writableState&&u._writableState.ended||(M=new r),a.call(u,M)):void 0},C=function(){u.req.on("finish",i)};return S(u)?(u.on("complete",i),u.on("abort",d),u.req?C():u.on("request",C)):N&&!u._writableState&&(u.on("end",A),u.on("close",A)),u.on("end",l),u.on("finish",i),p.error!==!1&&u.on("error",w),u.on("close",d),function(){u.removeListener("complete",i),u.removeListener("abort",d),u.removeListener("request",C),u.req&&u.req.removeListener("finish",i),u.removeListener("end",A),u.removeListener("close",A),u.removeListener("finish",i),u.removeListener("end",l),u.removeListener("error",w),u.removeListener("close",d)}}var r=R("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;L.exports=x},{"../../../errors":15}],25:[function(R,L){L.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(R,L){function y(I){var i=!1;return function(){i||(i=!0,I.apply(void 0,arguments))}}function o(I){if(I)throw I}function S(I){return I.setHeader&&typeof I.abort=="function"}function x(I,i,c,l){l=y(l);var w=!1;I.on("close",function(){w=!0}),a===void 0&&(a=R("./end-of-stream")),a(I,{readable:i,writable:c},function(C){return C?l(C):(w=!0,void l())});var d=!1;return function(C){if(!w)return d?void 0:(d=!0,S(I)?I.abort():typeof I.destroy=="function"?I.destroy():void l(C||new A("pipe")))}}function r(I){I()}function u(I,i){return I.pipe(i)}function p(I){return I.length&&typeof I[I.length-1]=="function"?I.pop():o}var a,b=R("../../../errors").codes,N=b.ERR_MISSING_ARGS,A=b.ERR_STREAM_DESTROYED;L.exports=function(){for(var I=arguments.length,i=Array(I),c=0;c<I;c++)i[c]=arguments[c];var l=p(i);if(Array.isArray(i[0])&&(i=i[0]),2>i.length)throw new N("streams");var w,d=i.map(function(C,M){var g=M<i.length-1;return x(C,g,0<M,function(v){w||(w=v),v&&d.forEach(r),g||(d.forEach(r),l(w))})});return i.reduce(u)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(R,L){function y(S,x,r){return S.highWaterMark==null?x?S[r]:null:S.highWaterMark}var o=R("../../../errors").codes.ERR_INVALID_OPT_VALUE;L.exports={getHighWaterMark:function(S,x,r,u){var p=y(x,u,r);if(p!=null){if(!(isFinite(p)&&T(p)===p)||0>p){var a=u?r:"highWaterMark";throw new o(a,p)}return T(p)}return S.objectMode?16:16384}}},{"../../../errors":15}],28:[function(R,L){L.exports=R("events").EventEmitter},{events:7}],29:[function(R,L,y){y=L.exports=R("./lib/_stream_readable.js"),y.Stream=y,y.Readable=y,y.Writable=R("./lib/_stream_writable.js"),y.Duplex=R("./lib/_stream_duplex.js"),y.Transform=R("./lib/_stream_transform.js"),y.PassThrough=R("./lib/_stream_passthrough.js"),y.finished=R("./lib/internal/streams/end-of-stream.js"),y.pipeline=R("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(R,L,y){function o(u,p){for(var a in u)p[a]=u[a]}function S(u,p,a){return r(u,p,a)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var x=R("buffer"),r=x.Buffer;r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?L.exports=x:(o(x,y),y.Buffer=S),S.prototype=Object.create(r.prototype),o(r,S),S.from=function(u,p,a){if(typeof u=="number")throw new TypeError("Argument must not be a number");return r(u,p,a)},S.alloc=function(u,p,a){if(typeof u!="number")throw new TypeError("Argument must be a number");var b=r(u);return p===void 0?b.fill(0):typeof a=="string"?b.fill(p,a):b.fill(p),b},S.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r(u)},S.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return x.SlowBuffer(u)}},{buffer:3}],31:[function(R,L,y){function o(d){if(!d)return"utf8";for(var C;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(C)return;d=(""+d).toLowerCase(),C=!0}}function S(d){var C=o(d);if(typeof C!="string"&&(l.isEncoding===w||!w(d)))throw new Error("Unknown encoding: "+d);return C||d}function x(d){this.encoding=S(d);var C;switch(this.encoding){case"utf16le":this.text=b,this.end=N,C=4;break;case"utf8":this.fillLast=a,C=4;break;case"base64":this.text=A,this.end=I,C=3;break;default:return this.write=i,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=l.allocUnsafe(C)}function r(d){return 127>=d?0:d>>5==6?2:d>>4==14?3:d>>3==30?4:d>>6==2?-1:-2}function u(d,C,M){var g=C.length-1;if(g<M)return 0;var v=r(C[g]);return 0<=v?(0<v&&(d.lastNeed=v-1),v):--g<M||v===-2?0:(v=r(C[g]),0<=v?(0<v&&(d.lastNeed=v-2),v):--g<M||v===-2?0:(v=r(C[g]),0<=v?(0<v&&(v===2?v=0:d.lastNeed=v-3),v):0))}function p(d,C){if((192&C[0])!=128)return d.lastNeed=0,"�";if(1<d.lastNeed&&1<C.length){if((192&C[1])!=128)return d.lastNeed=1,"�";if(2<d.lastNeed&&2<C.length&&(192&C[2])!=128)return d.lastNeed=2,"�"}}function a(d){var C=this.lastTotal-this.lastNeed,M=p(this,d);return M===void 0?this.lastNeed<=d.length?(d.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,C,0,d.length),void(this.lastNeed-=d.length)):M}function b(d,C){if((d.length-C)%2==0){var M=d.toString("utf16le",C);if(M){var g=M.charCodeAt(M.length-1);if(55296<=g&&56319>=g)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],M.slice(0,-1)}return M}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",C,d.length-1)}function N(d){var C=d&&d.length?this.write(d):"";if(this.lastNeed){var M=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,M)}return C}function A(d,C){var M=(d.length-C)%3;return M==0?d.toString("base64",C):(this.lastNeed=3-M,this.lastTotal=3,M==1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",C,d.length-M))}function I(d){var C=d&&d.length?this.write(d):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function i(d){return d.toString(this.encoding)}function c(d){return d&&d.length?this.write(d):""}var l=R("safe-buffer").Buffer,w=l.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};y.StringDecoder=x,x.prototype.write=function(d){if(d.length===0)return"";var C,M;if(this.lastNeed){if(C=this.fillLast(d),C===void 0)return"";M=this.lastNeed,this.lastNeed=0}else M=0;return M<d.length?C?C+this.text(d,M):this.text(d,M):C||""},x.prototype.end=function(d){var C=d&&d.length?this.write(d):"";return this.lastNeed?C+"�":C},x.prototype.text=function(d,C){var M=u(this,d,C);if(!this.lastNeed)return d.toString("utf8",C);this.lastTotal=M;var g=d.length-(M-this.lastNeed);return d.copy(this.lastChar,0,g),d.toString("utf8",C,g)},x.prototype.fillLast=function(d){return this.lastNeed<=d.length?(d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),void(this.lastNeed-=d.length))}},{"safe-buffer":30}],32:[function(R,L){(function(y){(function(){function o(S){try{if(!y.localStorage)return!1}catch{return!1}var x=y.localStorage[S];return x!=null&&(x+"").toLowerCase()==="true"}L.exports=function(S,x){function r(){if(!u){if(o("throwDeprecation"))throw new Error(x);o("traceDeprecation")?console.trace(x):console.warn(x),u=!0}return S.apply(this,arguments)}if(o("noDeprecation"))return S;var u=!1;return r}}).call(this)}).call(this,typeof he>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:he)},{}],"/":[function(R,L){function y(I){return I.replace(/a=ice-options:trickle\s\n/g,"")}function o(I){console.warn(I)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const S=R("debug")("simple-peer"),x=R("get-browser-rtc"),r=R("randombytes"),u=R("readable-stream"),p=R("queue-microtask"),a=R("err-code"),{Buffer:b}=R("buffer"),N=65536;class A extends u.Duplex{constructor(i){if(i=Object.assign({allowHalfOpen:!1},i),super(i),this._id=r(4).toString("hex").slice(0,7),this._debug("new peer %o",i),this.channelName=i.initiator?i.channelName||r(20).toString("hex"):null,this.initiator=i.initiator||!1,this.channelConfig=i.channelConfig||A.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},A.config,i.config),this.offerOptions=i.offerOptions||{},this.answerOptions=i.answerOptions||{},this.sdpTransform=i.sdpTransform||(c=>c),this.streams=i.streams||(i.stream?[i.stream]:[]),this.trickle=i.trickle===void 0||i.trickle,this.allowHalfTrickle=i.allowHalfTrickle!==void 0&&i.allowHalfTrickle,this.iceCompleteTimeout=i.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=i.wrtc&&typeof i.wrtc=="object"?i.wrtc:x(),!this._wrtc)throw a(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(c){return void this.destroy(a(c,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=c=>{this._onIceCandidate(c)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(c=>{this.destroy(a(c,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=c=>{this._setupData(c)},this.streams&&this.streams.forEach(c=>{this.addStream(c)}),this._pc.ontrack=c=>{this._onTrack(c)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(i){if(!this.destroying){if(this.destroyed)throw a(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof i=="string")try{i=JSON.parse(i)}catch{i={}}this._debug("signal()"),i.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),i.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(i.transceiverRequest.kind,i.transceiverRequest.init)),i.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(i.candidate):this._pendingCandidates.push(i.candidate)),i.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(i)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(c=>{this._addIceCandidate(c)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(c=>{this.destroy(a(c,"ERR_SET_REMOTE_DESCRIPTION"))}),i.sdp||i.candidate||i.renegotiate||i.transceiverRequest||this.destroy(a(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(i){const c=new this._wrtc.RTCIceCandidate(i);this._pc.addIceCandidate(c).catch(l=>{!c.address||c.address.endsWith(".local")?o("Ignoring unsupported ICE candidate."):this.destroy(a(l,"ERR_ADD_ICE_CANDIDATE"))})}send(i){if(!this.destroying){if(this.destroyed)throw a(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(i)}}addTransceiver(i,c){if(!this.destroying){if(this.destroyed)throw a(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(i,c),this._needsNegotiation()}catch(l){this.destroy(a(l,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:i,init:c}})}}addStream(i){if(!this.destroying){if(this.destroyed)throw a(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),i.getTracks().forEach(c=>{this.addTrack(c,i)})}}addTrack(i,c){if(this.destroying)return;if(this.destroyed)throw a(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const l=this._senderMap.get(i)||new Map;let w=l.get(c);if(!w)w=this._pc.addTrack(i,c),l.set(c,w),this._senderMap.set(i,l),this._needsNegotiation();else throw w.removed?a(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):a(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(i,c,l){if(this.destroying)return;if(this.destroyed)throw a(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const w=this._senderMap.get(i),d=w?w.get(l):null;if(!d)throw a(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");c&&this._senderMap.set(c,w),d.replaceTrack==null?this.destroy(a(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):d.replaceTrack(c)}removeTrack(i,c){if(this.destroying)return;if(this.destroyed)throw a(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const l=this._senderMap.get(i),w=l?l.get(c):null;if(!w)throw a(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{w.removed=!0,this._pc.removeTrack(w)}catch(d){d.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(w):this.destroy(a(d,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(i){if(!this.destroying){if(this.destroyed)throw a(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),i.getTracks().forEach(c=>{this.removeTrack(c,i)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,p(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw a(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(i){this._destroy(i,()=>{})}_destroy(i,c){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",i&&(i.message||i)),p(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",i&&(i.message||i)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,i&&this.emit("error",i),this.emit("close"),c()}))}_setupData(i){if(!i.channel)return this.destroy(a(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=i.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=N),this.channelName=this._channel.label,this._channel.onmessage=l=>{this._onChannelMessage(l)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=l=>{const w=l.error instanceof Error?l.error:new Error(`Datachannel error: ${l.message} ${l.filename}:${l.lineno}:${l.colno}`);this.destroy(a(w,"ERR_DATA_CHANNEL"))};let c=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(c&&this._onChannelClose(),c=!0):c=!1},5e3)}_read(){}_write(i,c,l){if(this.destroyed)return l(a(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(i)}catch(w){return this.destroy(a(w,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>N?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=l):l(null)}else this._debug("write before connect"),this._chunk=i,this._cb=l}_onFinish(){if(!this.destroyed){const i=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?i():this.once("connect",i)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(i=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(i.sdp=y(i.sdp)),i.sdp=this.sdpTransform(i.sdp);const c=()=>{if(!this.destroyed){const l=this._pc.localDescription||i;this._debug("signal"),this.emit("signal",{type:l.type,sdp:l.sdp})}};this._pc.setLocalDescription(i).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?c():this.once("_iceComplete",c))}).catch(l=>{this.destroy(a(l,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(i=>{this.destroy(a(i,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(i=>{i.mid||!i.sender.track||i.requested||(i.requested=!0,this.addTransceiver(i.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(i=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(i.sdp=y(i.sdp)),i.sdp=this.sdpTransform(i.sdp);const c=()=>{if(!this.destroyed){const l=this._pc.localDescription||i;this._debug("signal"),this.emit("signal",{type:l.type,sdp:l.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(i).then(()=>{this.destroyed||(this.trickle||this._iceComplete?c():this.once("_iceComplete",c))}).catch(l=>{this.destroy(a(l,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(i=>{this.destroy(a(i,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(a(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const i=this._pc.iceConnectionState,c=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",i,c),this.emit("iceStateChange",i,c),(i==="connected"||i==="completed")&&(this._pcReady=!0,this._maybeReady()),i==="failed"&&this.destroy(a(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),i==="closed"&&this.destroy(a(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(i){const c=l=>(Object.prototype.toString.call(l.values)==="[object Array]"&&l.values.forEach(w=>{Object.assign(l,w)}),l);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(l=>{const w=[];l.forEach(d=>{w.push(c(d))}),i(null,w)},l=>i(l)):0<this._pc.getStats.length?this._pc.getStats(l=>{if(this.destroyed)return;const w=[];l.result().forEach(d=>{const C={};d.names().forEach(M=>{C[M]=d.stat(M)}),C.id=d.id,C.type=d.type,C.timestamp=d.timestamp,w.push(c(C))}),i(null,w)},l=>i(l)):i(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const i=()=>{this.destroyed||this.getStats((c,l)=>{if(this.destroyed)return;c&&(l=[]);const w={},d={},C={};let M=!1;l.forEach(v=>{(v.type==="remotecandidate"||v.type==="remote-candidate")&&(w[v.id]=v),(v.type==="localcandidate"||v.type==="local-candidate")&&(d[v.id]=v),(v.type==="candidatepair"||v.type==="candidate-pair")&&(C[v.id]=v)});const g=v=>{M=!0;let P=d[v.localCandidateId];P&&(P.ip||P.address)?(this.localAddress=P.ip||P.address,this.localPort=+P.port):P&&P.ipAddress?(this.localAddress=P.ipAddress,this.localPort=+P.portNumber):typeof v.googLocalAddress=="string"&&(P=v.googLocalAddress.split(":"),this.localAddress=P[0],this.localPort=+P[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let j=w[v.remoteCandidateId];j&&(j.ip||j.address)?(this.remoteAddress=j.ip||j.address,this.remotePort=+j.port):j&&j.ipAddress?(this.remoteAddress=j.ipAddress,this.remotePort=+j.portNumber):typeof v.googRemoteAddress=="string"&&(j=v.googRemoteAddress.split(":"),this.remoteAddress=j[0],this.remotePort=+j[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(l.forEach(v=>{v.type==="transport"&&v.selectedCandidatePairId&&g(C[v.selectedCandidatePairId]),(v.type==="googCandidatePair"&&v.googActiveConnection==="true"||(v.type==="candidatepair"||v.type==="candidate-pair")&&v.selected)&&g(v)}),!M&&(!Object.keys(C).length||Object.keys(d).length))return void setTimeout(i,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(P){return this.destroy(a(P,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const v=this._cb;this._cb=null,v(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};i()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>N)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(i=>{this._pc.removeTrack(i),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(i){this.destroyed||(i.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:i.candidate.candidate,sdpMLineIndex:i.candidate.sdpMLineIndex,sdpMid:i.candidate.sdpMid}}):!i.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),i.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(i){if(this.destroyed)return;let c=i.data;c instanceof ArrayBuffer&&(c=b.from(c)),this.push(c)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const i=this._cb;this._cb=null,i(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(i){this.destroyed||i.streams.forEach(c=>{this._debug("on track"),this.emit("track",i.track,c),this._remoteTracks.push({track:i.track,stream:c}),this._remoteStreams.some(l=>l.id===c.id)||(this._remoteStreams.push(c),p(()=>{this._debug("on stream"),this.emit("stream",c)}))})}_debug(){const i=[].slice.call(arguments);i[0]="["+this._id+"] "+i[0],S.apply(null,i)}}A.WEBRTC_SUPPORT=!!x(),A.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},A.channelConfig={},L.exports=A},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(Pt);var $n=Pt.exports;const Gn=on($n),rt=0,it=1,Dt=2,Bt=(h,m)=>{ee(h,rt);const T=an(m);pe(h,T)},Ut=(h,m,T)=>{ee(h,it),pe(h,cn(m,T))},Kn=(h,m,T)=>Ut(m,T,De(h)),jt=(h,m,T)=>{try{un(m,De(h),T)}catch(U){console.error("Caught error while handling a Yjs update",U)}},Jn=(h,m)=>{ee(h,Dt),pe(h,m)},Xn=jt,Qn=(h,m,T,U)=>{const D=_t(h);switch(D){case rt:Kn(h,m,T);break;case it:jt(h,T,U);break;case Dt:Xn(h,T,U);break;default:throw new Error("Unknown message type")}return D},Zn=(h,m)=>{const T=ct(h).buffer,U=ct(m).buffer;return crypto.subtle.importKey("raw",T,"PBKDF2",!1,["deriveKey"]).then(D=>crypto.subtle.deriveKey({name:"PBKDF2",salt:U,iterations:1e5,hash:"SHA-256"},D,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},Ft=(h,m)=>{if(!m)return Ze(h);const T=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:T},m,h).then(U=>{const D=ne();return Xe(D,"AES-GCM"),pe(D,T),pe(D,new Uint8Array(U)),ie(D)})},er=(h,m)=>{const T=ne();return Zt(T,h),Ft(ie(T),m)},qt=(h,m)=>{if(!m)return Ze(h);const T=Qe(h);wt(T)!=="AES-GCM"&&gn(vt("Unknown encryption algorithm"));const D=De(T),R=De(T);return crypto.subtle.decrypt({name:"AES-GCM",iv:D},m,R).then(L=>new Uint8Array(L))},tr=(h,m)=>qt(h,m).then(T=>Qt(Qe(new Uint8Array(T)))),re=Un("y-webrtc"),Oe=0,Wt=3,Be=1,st=4,Ve=new Map,Re=new Map,Ht=h=>{let m=!0;h.webrtcConns.forEach(T=>{T.synced||(m=!1)}),(!m&&h.synced||m&&!h.synced)&&(h.synced=m,h.provider.emit("synced",[{synced:m}]),re("synced ",le,h.name,xe," with all peers"))},Vt=(h,m,T)=>{const U=Qe(m),D=ne(),R=_t(U);if(h===void 0)return null;const L=h.awareness,y=h.doc;let o=!1;switch(R){case Oe:{ee(D,Oe);const S=Qn(U,D,y,h);S===it&&!h.synced&&T(),S===rt&&(o=!0);break}case Wt:ee(D,Be),pe(D,qe(L,Array.from(L.getStates().keys()))),o=!0;break;case Be:sn(L,De(U),h);break;case st:{const S=rn(U)===1,x=wt(U);if(x!==h.peerId&&(h.bcConns.has(x)&&!S||!h.bcConns.has(x)&&S)){const r=[],u=[];S?(h.bcConns.add(x),u.push(x)):(h.bcConns.delete(x),r.push(x)),h.provider.emit("peers",[{added:u,removed:r,webrtcPeers:Array.from(h.webrtcConns.keys()),bcPeers:Array.from(h.bcConns)}]),Yt(h)}break}default:return console.error("Unable to compute message"),D}return o?D:null},nr=(h,m)=>{const T=h.room;return re("received message from ",le,h.remotePeerId,tt," (",T.name,")",xe,Ye),Vt(T,m,()=>{h.synced=!0,re("synced ",le,T.name,xe," with ",le,h.remotePeerId),Ht(T)})},$e=(h,m)=>{re("send message to ",le,h.remotePeerId,xe,tt," (",h.room.name,")",Ye);try{h.peer.send(ie(m))}catch{}},rr=(h,m)=>{re("broadcast message in ",le,h.name,xe),h.webrtcConns.forEach(T=>{try{T.peer.send(m)}catch{}})};class pt{constructor(m,T,U,D){re("establishing connection to ",le,U),this.room=D,this.remotePeerId=U,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Gn({initiator:T,...D.provider.peerOpts}),this.peer.on("signal",R=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),ot(m,D,{to:U,from:D.peerId,type:"signal",token:this.glareToken,signal:R})}),this.peer.on("connect",()=>{re("connected to ",le,U),this.connected=!0;const L=D.provider.doc,y=D.awareness,o=ne();ee(o,Oe),Bt(o,L),$e(this,o);const S=y.getStates();if(S.size>0){const x=ne();ee(x,Be),pe(x,qe(y,Array.from(S.keys()))),$e(this,x)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,D.webrtcConns.has(this.remotePeerId)&&(D.webrtcConns.delete(this.remotePeerId),D.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(D.webrtcConns.keys()),bcPeers:Array.from(D.bcConns)}])),Ht(D),this.peer.destroy(),re("closed connection to ",le,U),Je(D)}),this.peer.on("error",R=>{re("Error in connection to ",le,U,": ",R),Je(D)}),this.peer.on("data",R=>{const L=nr(this,R);L!==null&&$e(this,L)})}destroy(){this.peer.destroy()}}const we=(h,m)=>Ft(m,h.key).then(T=>h.mux(()=>zn(h.name,T))),gt=(h,m)=>{h.bcconnected&&we(h,m),rr(h,m)},Je=h=>{Ve.forEach(m=>{m.connected&&(m.send({type:"subscribe",topics:[h.name]}),h.webrtcConns.size<h.provider.maxConns&&ot(m,h,{type:"announce",from:h.peerId}))})},Yt=h=>{if(h.provider.filterBcConns){const m=ne();ee(m,st),Et(m,1),Xe(m,h.peerId),we(h,ie(m))}};class ir{constructor(m,T,U,D){this.peerId=pn(),this.doc=m,this.awareness=T.awareness,this.provider=T,this.synced=!1,this.name=U,this.key=D,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=nn(),this.bcconnected=!1,this._bcSubscriber=R=>qt(new Uint8Array(R),D).then(L=>this.mux(()=>{const y=Vt(this,L,()=>{});y&&we(this,ie(y))})),this._docUpdateHandler=(R,L)=>{const y=ne();ee(y,Oe),Jn(y,R),gt(this,ie(y))},this._awarenessUpdateHandler=({added:R,updated:L,removed:y},o)=>{const S=R.concat(L).concat(y),x=ne();ee(x,Be),pe(x,qe(this.awareness,S)),gt(this,ie(x))},this._beforeUnloadHandler=()=>{ut(this.awareness,[m.clientID],"window unload"),Re.forEach(R=>{R.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof ue<"u"&&ue.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Je(this);const m=this.name;Vn(m,this._bcSubscriber),this.bcconnected=!0,Yt(this);const T=ne();ee(T,Oe),Bt(T,this.doc),we(this,ie(T));const U=ne();ee(U,Oe),Ut(U,this.doc),we(this,ie(U));const D=ne();ee(D,Wt),we(this,ie(D));const R=ne();ee(R,Be),pe(R,qe(this.awareness,[this.doc.clientID])),we(this,ie(R))}disconnect(){Ve.forEach(T=>{T.connected&&T.send({type:"unsubscribe",topics:[this.name]})}),ut(this.awareness,[this.doc.clientID],"disconnect");const m=ne();ee(m,st),Et(m,0),Xe(m,this.peerId),we(this,ie(m)),Yn(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(T=>T.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof ue<"u"&&ue.off("exit",this._beforeUnloadHandler)}}const sr=(h,m,T,U)=>{if(Re.has(T))throw vt(`A Yjs Doc connected to room "${T}" already exists!`);const D=new ir(h,m,T,U);return Re.set(T,D),D},ot=(h,m,T)=>{m.key?er(T,m.key).then(U=>{h.send({type:"publish",topic:m.name,data:kt(U)})}):h.send({type:"publish",topic:m.name,data:T})};class or extends qn{constructor(m){super(m),this.providers=new Set,this.on("connect",()=>{re(`connected (${m})`);const T=Array.from(Re.keys());this.send({type:"subscribe",topics:T}),Re.forEach(U=>ot(this,U,{type:"announce",from:U.peerId}))}),this.on("message",T=>{switch(T.type){case"publish":{const U=T.topic,D=Re.get(U);if(D==null||typeof U!="string")return;const R=L=>{const y=D.webrtcConns,o=D.peerId;if(L==null||L.from===o||L.to!==void 0&&L.to!==o||D.bcConns.has(L.from))return;const S=y.has(L.from)?()=>{}:()=>D.provider.emit("peers",[{removed:[],added:[L.from],webrtcPeers:Array.from(D.webrtcConns.keys()),bcPeers:Array.from(D.bcConns)}]);switch(L.type){case"announce":y.size<D.provider.maxConns&&(Fe(y,L.from,()=>new pt(this,!0,L.from,D)),S());break;case"signal":if(L.signal.type==="offer"){const x=y.get(L.from);if(x){const r=L.token,u=x.glareToken;if(u&&u>r){re("offer rejected: ",L.from);return}x.glareToken=void 0}}if(L.signal.type==="answer"){re("offer answered by: ",L.from);const x=y.get(L.from);x.glareToken=void 0}L.to===o&&(Fe(y,L.from,()=>new pt(this,!1,L.from,D)).peer.signal(L.signal),S());break}};D.key?typeof T.data=="string"&&tr(Ot(T.data),D.key).then(R):R(T.data)}}}),this.on("disconnect",()=>re(`disconnect (${m})`))}}class dr extends mt{constructor(m,T,{signaling:U=["wss://y-webrtc-eu.fly.dev"],password:D=null,awareness:R=new en(T),maxConns:L=20+tn(hn()*15),filterBcConns:y=!0,peerOpts:o={}}={}){super(),this.roomName=m,this.doc=T,this.filterBcConns=y,this.awareness=R,this.shouldConnect=!1,this.signalingUrls=U,this.signalingConns=[],this.maxConns=L,this.peerOpts=o,this.key=D?Zn(D,m):Ze(null),this.room=null,this.key.then(S=>{this.room=sr(T,this,m,S),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),T.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(m=>{const T=Fe(Ve,m,()=>new or(m));this.signalingConns.push(T),T.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(m=>{m.providers.delete(this),m.providers.size===0&&(m.destroy(),Ve.delete(m.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),Re.delete(this.roomName)}),super.destroy()}}export{le as B,It as O,Ln as R,xe as U,dr as W,fn as a,fr as b,hr as c,Dn as p,pn as u};
